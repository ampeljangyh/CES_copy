<!DOCType html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, user-scalable=0">
<meta name="msapplication-TileColor" content="#4D6EDB">
<meta property="og:title" content="">
<meta property="og:description" content="">
<meta property="og:Type" content="website">
<meta property="og:image" content="../../resources/images/">
<title></title>
<link rel="shortcut icon" href="../../resources/images/" type="image/x-icon">
<link rel="apple-touch-icon" href="../../resources/images/">
<link rel="stylesheet" href="../../resources/css/style.css">

<!-- 퍼블리싱 -->
<script src="../../resources/js/jquery-3.7.1.min.js"></script>
<script src="../../resources/js/jquery-ui.js"></script>
<script src="../../resources/js/swiper-bundle.min.js"></script>
<script src="../../resources/js/chart.js"></script>
<!-- //퍼블리싱 -->
</head>

<body class="gate_01_01 cop_detail_cont_wrap">
<!-- wrap -->
<div id="wrap" class="com_bg gate_01_main">
    <!-- Header -->
    <header>
    </header>
    <!-- //Header -->

    <!-- Container -->
    <section id="container" class="gate_01">
        <div class="snb">
            <div class="snb_inner">
                <a href="../main.html" class="logo">
                    <img src="../../resources/images/logo.png">
                </a>
                <div class="menu">
                    <ul>
                        <li>
                            <a href="../main.html" class="menu_item ico_01">메인</a>
                        </li>
                        <li>
                            <a href="../gate01/gate_01.html" class="menu_item ico_02 active">기술 금융 시스템</a>
                        </li>
                        <li>
                            <a href="../gate02/gate_02.html" class="menu_item ico_03">K-콘텐츠 투자</a>
                        </li>
                        <li>
                            <a href="../gate03/gate_03.html" class="menu_item ico_04">ESG 정밀진단 시스템</a>
                        </li>
                    </ul>
                </div>
                <div class="lang">
                    <button type="button" class="btn_lang">
                        <span class="en">English</span>
                        <span class="kr">한국어</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="contents">
            <div class="contents_detail">
                <div class="contents_detail_inner">
                    <div class="list_cop_box">
                        <button type="button" class="btn_list_cop">
                            <span>기업 목록 보기</span>
                        </button>
                    </div>

                    <div class="cop_tit_wrap">
                        <div class="cop_logo">
                            <div class="logo_inner">
                                <div class="logo">
                                    <img src="../../resources/images/floatin_img_07.jpg">
                                </div>
                                <div class="cop_name_box">
                                    <div class="tit">
                                        <span>듀셀바이오테라퓨틱스</span>
                                    </div>
                                    <div class="sub">
                                        <span>바이오·의료</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="cop_info_btn">
                            <div class="cop_detail">
                                <button type="button" class="btn_cop_detail">
                                    <span>상세정보</span>
                                </button>
                            </div>
                            <div class="cop_loca">
                                <button type="button" class="btn_cop_loca">
                                    <span>부스 위치</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="cop_desc_wrap">
                        <p>(주)포트래이는 의학 및 약학 연구개발업을 영위하기 위해 2021년에 설립된 법인사업자(일반)이며, 주력 제품은 공간 전사체와 AI 기술을 활용한 신약 분석 서비스가 있고, 경영주 이대승이 서울 종로구 동순라길 78-18, 지하1층 에스오 003호에서 해당 사업을 운영 중에 있</p>
                    </div>

                    <div class="grade_box">
                        <ul>
                            <li>
                                <div class="grade_item">
                                    <div class="tit">
                                        <span>신용 등급</span>
                                    </div>
                                    <div class="desc">
                                        <strong>BB+</strong>
                                        <span>양호</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <button type="button" class="btn_grade_item">
                                    <div class="grade_item">
                                        <div class="tit">
                                            <span>기술 등급</span>
                                        </div>
                                        <div class="desc">
                                            <strong>T4-</strong>
                                            <span>양호</span>
                                        </div>
                                    </div>
                                </button>
                            </li>
                            <li>
                                <button type="button" class="btn_grade_item">
                                    <div class="grade_item">
                                        <div class="tit">
                                            <span>성장성 점수</span>
                                        </div>
                                        <div class="desc">
                                            <strong>98.6709</strong>
                                        </div>
                                    </div>
                                </button>
                            </li>
                        </ul>
                    </div>

                    <div class="cop_cont_wrap">
                        <div class="cop_cont_inner">
                            <div class="cop_cont_tit">
                                <span>미래 성장성 예측</span>
                            </div>
                            <div class="cop_cont_desc">
                                <p>
해당 업체의 현재 성장 위치 및 상황에 적합한 지원 상품들을 제공함으로써 해당 업체의 미래 성장 결과가 변화합니다.<br>
지원 상품을 선택하고 미래 성장 모형이 어떻게 변화하는지 확인해보세요.
                                </p>
                            </div>
                            <div class="cop_cont_grp_wrap">
                                <div class="cop_cont_grp_inner">
                                    <div class="cop_cont_grp">
<div class="growth-chart-wrap">
  <canvas id="growthChart"></canvas>
</div>
                                    </div>
                                    <div class="cop_cont_grp_detail">
                                        <div class="btn_grp_detail">
                                            <button type="button" class="btn_detail">
                                                <span>성장 자세히 보기</span>
                                            </button>
                                        </div>
                                        <div class="cop_logo">
                                            <img src="../../resources/images/search_result_02.jpg">
                                        </div>
                                        <div class="grp_tg_bar">
                                            <div class="grd_bar"></div>
                                            <div class="point">
                                                <span class="dotd"></span>
                                                <span class="line"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="apply_prd">
                                <div class="apply_prd_tit"> 
                                    <div class="apply_img">
                                        <img src="../../resources/images/search_result_02.jpg">
                                    </div>
                                    <div class="apply_text">
                                        <span>지원된 상품</span>
                                    </div>
                                </div>
                                <div class="apply_prd_list">
                                    <div class="step_03_resilt">
                                        <div class="step_03_resilt_list">
                                            <div class="logo_box">
                                                <div class="logo_item">
                                                    <img src="../../resources/images/dollar_3d.png">
                                                </div>
                                                <div class="logo_text">
                                                    <span>금융 상품</span> 
                                                </div>
                                            </div>
                                            <div class="step_resilt_list">
                                                <ul>
                                                    <li>
                                                        <div class="item">
                                                            <span>상품A</span>
                                                            <p>어쩌고저쩌고한 상품</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="item">
                                                            <span>상품A</span>
                                                            <p>어쩌고저쩌고한 상품</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="item">
                                                            <span>상품A</span>
                                                            <p>어쩌고저쩌고한 상품</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="item">
                                                            <span>상품A</span>
                                                            <p>어쩌고저쩌고한 상품</p>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="step_03_resilt_list">
                                            <div class="logo_box">
                                                <div class="logo_item">
                                                    <img src="../../resources/images/gift_3d.png">
                                                </div>
                                                <div class="logo_text">
                                                    <span>비금융 상품</span>
                                                </div>
                                            </div>
                                            <div class="step_resilt_list">
                                                <ul>
                                                    <li>
                                                        <div class="item">
                                                            <span>상품A</span>
                                                            <p>어쩌고저쩌고한 상품</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="item">
                                                            <span>상품A</span>
                                                            <p>어쩌고저쩌고한 상품</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="item">
                                                            <span>상품A</span>
                                                            <p>어쩌고저쩌고한 상품</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="item">
                                                            <span>상품A</span>
                                                            <p>어쩌고저쩌고한 상품</p>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- //Container -->

    <!-- Footer -->
    <footer>
    </footer>
    <!-- //Footer -->
</div>
<!-- //wrap -->






<div class="as_expec_pop cardDetailPop01" id="tec01">
    <div class="inner">
        <div class="txt">
            <span class="sub">IBK 기술 평가 시스템</span>
            <strong class="tit">기술 평가 예상 결과</strong>
        </div>
        <div class="com_pu">
            <div class="com_ico">
                <img src="../../resources/images/search_result_01.jpg">
            </div>
            <span class="text">기술력 분석 시 아래와 같은 결과가 예상됩니다.</span>
        </div>
        <div class="context">
            <div class="inner">
                <div class="con_txt">
                    <span>기술 평가</span>
                </div>
                <div class="con_mp">
                    <video src="../../resources/images/one_1.mp4" autoplay muted loop playsinline></video>
                </div>
                <div class="con_re">
                    <span class="tit">예상 등급</span>
                    <div class="con_re_content">
                        <p>
                            <span>T3</span>(양호)
                        </p>
                    </div>
                </div>
            </div>
            <div class="btn_pop_box">
                <button type="button" class="btn_pop">기술평가 진행</button>
            </div>
        </div>
    </div>
</div>


<div class="tech_ra_pop">
    <div class="pop_inner">
        <button type="button" class="pop_close">
            <span></span>
        </button>

        <div class="tech_ra_tit">
            <div class="svg_wrap">
                <div class="svg_box">
                    <img src="../../resources/images/credit_ga.png">
                </div>
                <div class="ga_item_info">
                    <span class="top">A+</span>
                    <span class="bot">(우수)</span>
                    <span class="dot_b"></span>
                </div>
            </div>
            <div class="cop_pop_tit">
                <div class="logo_tit">
                    <div class="logo_box">
                        <img src="../../resources/images/search_result_01.jpg">
                    </div>
                    <div class="tit_box">
                        <span>기술 등급</span>
                    </div>
                </div>
                <div class="logo_desc">
                    <p>IBK 기술 평가 시스템을 통해 해당 기업의 기술 가치를 평가합니다.</p>
                </div>
            </div>
        </div>

        <div class="grp_tab_box">
            <button type="button" class="grp_tab_item on">
                <div class="grp_tab_btn">
                    <span>기술 사업 역량</span>
                </div>

                <div class="grade">
                    <span class="top">C</span>
                    <span class="bott">(보통)</span>
                </div>
            </button>
            <button type="button" class="grp_tab_item">
                <div class="grp_tab_btn">
                    <span>기술 경쟁력</span>
                </div>

                <div class="grade">
                    <span class="top">B</span>
                    <span class="bott">(양호)</span>
                </div>
            </button>
        </div>

        <div class="grp_tab_content">
            <div class="inner">
                <div class="radial_box">
                    <div class="radial_inner">
                        <div class="radial_wrap">
                            <div class="radial_inner">
                                <canvas id="abilityRadar"></canvas>
                            </div>
                            <div class="radial_btn_list">
                                <button type="button" class="radial_btn on">
                                    <span>경영주 역량</span>
                                </button>
                                <button type="button" class="radial_btn">
                                    <span>관리 능력</span>
                                </button>
                                <button type="button" class="radial_btn">
                                    <span>기술 개발 능력</span>
                                </button>
                                <button type="button" class="radial_btn">
                                    <span>제품화 역량</span>
                                </button>
                                <button type="button" class="radial_btn">
                                    <span>수익 전망</span>
                                </button>
                            </div>
                        </div>
                        <div class="grp_btn_list">
                            <div class="list_item">
                                <div class="tit"><span>항목</span></div>
                                <ul>
                                    <li>
                                        <button type="button" class="list_btn arrow on" data-target="link01">
                                            <span>경영주 역량</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button type="button" class="list_btn arrow" data-target="link02">
                                            <span>관리 능력</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button type="button" class="list_btn arrow" data-target="link03">
                                            <span>기술 개발 능력</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button type="button" class="list_btn arrow" data-target="link04">
                                            <span>제품화 역량</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button type="button" class="list_btn arrow" data-target="link05">
                                            <span>수익 전망</span>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                            <div class="list_item">
                                <div class="tit"><span>등급</span></div>
                                <ul>
                                    <li>
                                        <div class="btn on" data-target="link01">
                                            <span>B</span>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="btn" data-target="link02">
                                            <span>B</span>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="btn" data-target="link03">
                                            <span>B</span>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="btn" data-target="link04">
                                            <span>B</span>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="btn" data-target="link05">
                                            <span>B</span>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bar_grp_wrap">
                    <div class="bar_grp_box">
                        <div class="tit_inner">
                            <div class="bar_grp_box_tit">
                                <span class="tit">경영주 역량</span>
                            </div>
                            <div class="badge_box">
                                <span class="l">B</span>
                                <span class="r">(양호)</span>
                            </div>
                        </div>
                        <div class="bar_grp_inner">
                            <div class="skill-bar-wrap">
                                <canvas id="skillBarChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="comm_box">
                        <div class="tit">
                            <span>평가 코멘트</span>
                        </div>
                        <div class="desc">
                            <p>
                                대표자 이민우는 기술사업관리를 주도하고 있으며, 2021년 동사를 창업하여 현재에 이르고 있음. 이민우의 관련업종 경험기간은 14년 7개월로 파악되어 동업종 경험수준은 보통인 수준으로 평가됨. 경영주의 학력사항 및 기술경험기간을 고려 시 특급기술자로 기술지식수준은 우수한 수준임. 한편, 경영기획, 정보수집 능력, 기술전략, 기업가정신 등의 항목을 충족하여 기술경영 관리능력은 양호한 것으로 판단됨.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>



<!-- 상세페이지 미래 성장성 예측 차트 -->
<script>
// 1px → 0.0260vw
const PX_TO_VW = 0.0260;

function vwToPx(vw) {
  return window.innerWidth * (vw / 100);
}
function designPxToRealPx(px) {
  const vw = px * PX_TO_VW;
  return vwToPx(vw);
}

// 글자 / 선 두께
function getFontSizePx()   { return designPxToRealPx(38); }
function getLineWidthPx()  { return designPxToRealPx(5); }

// ★ X축은 9포인트(굴곡 9개), 실제 텍스트는 콜백에서 처리
const labels = ['1','2','3','4','5','6','7','8','9'];

// X축에 표시할 4개 스테이지 라벨
const stageLabels = ['초기', '성장기', '성숙·안정기', '지속성장'];

// ★ 모든 그래프의 시작값(초기)은 10으로 통일
const dataBase      = [10, 10, 10, 10, 10, 10, 10, 10, 10]; // 기준선 (fill용)

// 업종 평균 : 시작은 같고, 전체적으로 평평하지만 굴곡은 많게
const dataIndustry  = [10,  5, 11.5,  8.5, 15.5,  5.5, 13,  5, 10];

// 지원 전 : 굴곡 크게, 항상 벤치마크보다 아래
const dataBefore    = [10, 16, 22, 19, 27, 25, 33, 30, 60];

// 지원 후 : 굴곡 크게 + 더 많이 성장, 역시 벤치마크보다 아래
const dataAfter     = [10, 16, 40, 45, 80, 75, 70, 90, 140];

// 벤치마크 : 선형 증가, 기울기 더 가파르게 (최대 160)
const dataBenchmark = [10, 32, 53, 73, 93, 112, 130, 148, 165];

window.addEventListener('load', function () {
  const ctx = document.getElementById('growthChart').getContext('2d');

  const lineWidth = getLineWidthPx();
  const fontSize  = getFontSizePx();

  // 색감 (요청안 유지)
  const COLOR_AFTER    = '#0071FE';  // 지원 후
  const COLOR_BEFORE   = '#BEBEBE';  // 지원 전
  const COLOR_BENCH    = '#5be6be';  // 벤치마크
  const COLOR_INDUSTRY = '#ffffff';  // 업종 평균

  const chart = new Chart(ctx, {
    type: 'line',
    data: {
      labels,
      datasets: [
        // 0. 기준선(면 채우기용, 화면에는 안 보임)
        {
          label: 'baseline',
          data: dataBase,
          borderColor: 'rgba(0,0,0,0)',
          borderWidth: 0,
          backgroundColor: 'rgba(0,0,0,0)',
          pointRadius: 0,
          pointHoverRadius: 0,
          tension: 0,
          fill: false
        },
        // 1. 업종 평균 (맨 아래, 점선 + 굴곡 많음)
        {
          label: '업종평균',
          data: dataIndustry,
          borderColor: COLOR_INDUSTRY,
          borderWidth: lineWidth,
          borderDash: [ designPxToRealPx(12), designPxToRealPx(12) ],
          backgroundColor: 'rgba(0,0,0,0)',
          pointRadius: 0,
          pointHoverRadius: 0,
          tension: 0,
          fill: false
        },
        // 2. 지원 전 (면은 baseline까지, 시작점 동일)
        {
          label: '지원 전',
          data: dataBefore,
          borderColor: COLOR_BEFORE,
          borderWidth: lineWidth,
          backgroundColor: 'rgba(190, 190, 190, 0.17)',
          fill: 0, // baseline까지
          pointRadius: 0,
          pointHoverRadius: 0,
          tension: 0
        },
        // 3. 지원 후 (면은 baseline까지, 굴곡 더 크게)
        {
          label: '지원 후',
          data: dataAfter,
          borderColor: COLOR_AFTER,
          borderWidth: lineWidth,
          backgroundColor: 'rgba(0, 113, 254, 0.17)',
          fill: 0,
          pointRadius: 0,
          pointHoverRadius: 0,
          tension: 0
        },
        // 4. 벤치마크 (가장 위, 선형 증가, 선만)
        {
          label: '벤치마크',
          data: dataBenchmark,
          borderColor: COLOR_BENCH,
          borderWidth: lineWidth,
          backgroundColor: 'rgba(0,0,0,0)',
          fill: false,
          pointRadius: 0,
          pointHoverRadius: 0,
          tension: 0
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: { enabled: false }
      },
      scales: {
        x: {
          grid: { display: false },
          ticks: {
            color: '#c4cad6',
            font: {
              size: fontSize,
              family: 'Pretendard, Noto Sans KR, sans-serif'
            },
            // 그래프와 라벨 간 간격 ↑
            padding: designPxToRealPx(24),
            // 9개 포인트 중 4개 위치에만 텍스트 표시
            callback: function (value, index) {
              if (index === 0) return stageLabels[0];
              if (index === 2) return stageLabels[1];
              if (index === 5) return stageLabels[2];
              if (index === 8) return stageLabels[3];
              return '';
            }
          }
        },
        y: {
          display: false,
          min: 0,
          max: 170
        }
      },
      // ★ 캔버스 안쪽 패딩 증가 (텍스트/그래프 여유)
      layout: {
        padding: {
          top:    fontSize * 2.8,  // 위쪽 조금 더
          bottom: fontSize * 2.4,  // 아래쪽도 여유
          left:   fontSize * 1.2,
          right:  fontSize * 4.8   // 오른쪽 라벨 공간 확보
        }
      }
    },
    plugins: [
      // 오른쪽 라벨
      {
        id: 'rightLabels',
        afterDraw(chart, args, opts) {
          const { ctx, chartArea } = chart;
          const labelsRight = ['벤치마크', '지원 후', '지원 전', '업종평균'];

          ctx.save();
          ctx.font = `${getFontSizePx()}px Pretendard, Noto Sans KR, sans-serif`;
          ctx.textAlign = 'left';
          ctx.textBaseline = 'middle';

          // 라벨을 조금 더 오른쪽으로
          const x = chartArea.right + getFontSizePx() * 0.6;

          const top = chartArea.top;
          const bottom = chartArea.bottom;
          // ★ y 위치 간격을 더 넓게
          const pos = [0.03, 0.2, 0.65, 0.94];

          labelsRight.forEach((txt, idx) => {
            const y = top + (bottom - top) * pos[idx];
            if (txt === '벤치마크')      ctx.fillStyle = COLOR_BENCH;
            else if (txt === '지원 후')  ctx.fillStyle = COLOR_AFTER;
            else if (txt === '지원 전')  ctx.fillStyle = COLOR_BEFORE;
            else                         ctx.fillStyle = COLOR_INDUSTRY;
            ctx.fillText(txt, x, y);
          });

          ctx.restore();
        }
      }
    ]
  });

  // 리사이즈 시 선두께/폰트 재계산
  window.addEventListener('resize', function () {
    const newLineWidth = getLineWidthPx();
    const newFontSize  = getFontSizePx();

    chart.data.datasets.forEach(ds => {
      if (ds.label !== 'baseline') {
        ds.borderWidth = newLineWidth;
      }
    });

    chart.options.scales.x.ticks.font.size = newFontSize;
    chart.options.scales.x.ticks.padding   = designPxToRealPx(24);
    chart.options.layout.padding = {
      top:    newFontSize * 2.8,
      bottom: newFontSize * 2.4,
      left:   newFontSize * 1.2,
      right:  newFontSize * 4.8
    };

    chart.update();
  });
});
</script>



<!-- 상세페이지 기술 등급 팝업 내 > 기술 사업 역량 방사형, 바 그래프 차트 -->
<script>
////////////  방사형 차트  ////////////
// 2px 두께를 실제 px로
function getLineWidthPx() {
  return designPxToRealPx(2); // 2px = 0.0521vw
}

// ----------------------
// 데이터(숫자만)
// ----------------------
const radarValues = [40, 70, 65, 60, 35]; // [경영주, 관리, 개발, 제품화, 수익]

window.addEventListener('load', function () {
  const ctx = document.getElementById('abilityRadar').getContext('2d');

  let lineWidth = getLineWidthPx();

  window.abilityRadarChart = new Chart(ctx, {
    type: 'radar',
    data: {
      labels: ['1', '2', '3', '4', '5'],
      datasets: [{
        label: 'ownerAbility',
        data: radarValues,
        borderColor: '#247CFF',
        backgroundColor: 'rgba(36,124,255,0.35)',
        borderWidth: lineWidth,             // ★ 2px → vw → px
        pointRadius: 0,
        pointHoverRadius: 0,
        fill: true
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: { enabled: false }
      },
      scales: {
        r: {
          min: 0,
          max: 100,
          ticks: {
            display: false,
            stepSize: 20
          },
          grid: {
            color: 'rgba(241, 241, 241, 0.39)',
            lineWidth: lineWidth          // ★ 그리드 두께
          },
          angleLines: {
            color: 'rgba(241, 241, 241, 0.39)',
            lineWidth: lineWidth          // ★ 방사형 선 두께
          },
          pointLabels: {
            display: false               // 축 라벨 숨김
          }
        }
      }
    }
  });

  // 리사이즈 시 두께 재계산(반응형)
  window.addEventListener('resize', function () {
    const newWidth = getLineWidthPx();
    const chart = window.abilityRadarChart;
    chart.data.datasets[0].borderWidth = newWidth;
    chart.options.scales.r.grid.lineWidth = newWidth;
    chart.options.scales.r.angleLines.lineWidth = newWidth;
    chart.update();
  });
});



////////////  바형 차트  ////////////
// 1px → 0.0260vw
function vwToPx(vw){return window.innerWidth*(vw/100);}
function designPxToRealPx(px){const vw=px*PX_TO_VW;return vwToPx(vw);}

// 데이터
const skillLabels = ['동업종 경험 수준','기술지식 수준','기술경영 관리 능력'];
const skillValues = [20,70,95]; // 0~100

// 리스트별 회색 구분선
const separatorLinesPlugin = {
  id:'separatorLines',
  afterDraw(chart){
    const {ctx, chartArea:{top,bottom}} = chart;
    const count = chart.data.labels.length;
    const rowH = (bottom-top)/count;
    const lineWidth = designPxToRealPx(2);

    const canvasLeft  = 0;
    const canvasRight = chart.width;

    ctx.save();
    ctx.strokeStyle = 'rgba(255,255,255,0.4)';
    ctx.lineWidth = lineWidth;

    for(let i=1;i<=count;i++){
      const yPos = top + rowH*i;
      ctx.beginPath();
      ctx.moveTo(canvasLeft,  yPos);
      ctx.lineTo(canvasRight, yPos);
      ctx.stroke();
    }
    ctx.restore();
  }
};

// 껍데기(보더 + 어두운 배경) 그리는 플러그인
const trackPlugin = {
  id:'trackPlugin',
  beforeDatasetsDraw(chart){
    const {ctx, scales:{x,y}} = chart;
    const labels = chart.data.labels;
    const trackH = designPxToRealPx(19); // 바 높이
    const radius = trackH/2;
    const xStart = x.getPixelForValue(0);
    const xEnd   = x.getPixelForValue(100);
    const width  = xEnd - xStart;
    const borderW = designPxToRealPx(2);

    ctx.save();
    ctx.lineWidth = borderW;
    ctx.strokeStyle = '#0071FE';
    ctx.fillStyle   = '#282C36';

    labels.forEach(label=>{
      const cy = y.getPixelForValue(label);
      const yTop = cy - trackH/2;

      drawRoundedRect(ctx, xStart, yTop, width, trackH, radius);
      ctx.fill();
      ctx.stroke();
    });

    ctx.restore();
  }
};

// 타이틀(라벨) 직접 그려서 세로 중앙 + 왼쪽 정렬 맞추는 플러그인
const labelCenterPlugin = {
  id: 'labelCenterPlugin',
  afterDraw(chart) {
    const {ctx, scales:{y}, chartArea} = chart;
    const labels = chart.data.labels;

    const fontSize = designPxToRealPx(33);
    const labelX   = designPxToRealPx(0); // 캔버스 왼쪽에서 조금 안쪽

    ctx.save();
    ctx.fillStyle = '#FFFFFF';
    ctx.font = `${fontSize}px Pretendard, "Noto Sans KR", sans-serif`;
    ctx.textAlign = 'left';      // ★ 왼쪽 정렬
    ctx.textBaseline = 'middle'; // ★ 세로 중앙

    labels.forEach(label => {
      const cy = y.getPixelForValue(label); // 바 중앙 y값과 동일
      ctx.fillText(label, labelX, cy);
    });

    ctx.restore();
  }
};

// 공용: 라운드 사각형
function drawRoundedRect(ctx,x,y,w,h,r){
  const rr = Math.min(r,w/2,h/2);
  ctx.beginPath();
  ctx.moveTo(x+rr,y);
  ctx.lineTo(x+w-rr,y);
  ctx.quadraticCurveTo(x+w,y,x+w,y+rr);
  ctx.lineTo(x+w,y+h-rr);
  ctx.quadraticCurveTo(x+w,y+h,x+w-rr,y+h);
  ctx.lineTo(x+rr,y+h);
  ctx.quadraticCurveTo(x,y+h,x,y+h-rr);
  ctx.lineTo(x,y+rr);
  ctx.quadraticCurveTo(x,y,x+rr,y);
  ctx.closePath();
}

window.addEventListener('load', function(){
  const ctx = document.getElementById('skillBarChart').getContext('2d');

  const barThickness = designPxToRealPx(18);

  new Chart(ctx,{
    type:'bar',
    data:{
      labels: skillLabels,
      datasets:[
        {
          data: skillValues,
          borderWidth: 0,
          backgroundColor(context){
            const {chart} = context;
            const {ctx, chartArea} = chart;
            if(!chartArea) return '#0071FE';
            const g = ctx.createLinearGradient(chartArea.left,0,chartArea.right,0);
            g.addColorStop(0, '#252D3E');   // 진한 회색
            g.addColorStop(0.4,'#005ED8');  // 중간 파랑
            g.addColorStop(1, '#008DFF');   // 밝은 파랑
            return g;
          },
          borderRadius: Number.MAX_VALUE,
          borderSkipped:false,
          barThickness:barThickness,
          barPercentage:0.82,
          categoryPercentage:0.7
        }
      ]
    },
    options:{
      responsive:true,
      maintainAspectRatio:false,
      indexAxis:'y',
      plugins:{
        legend:{display:false},
        tooltip:{enabled:false}
      },
      scales:{
        x:{
          min:0,
          max:100,
          grid:{display:false},
          ticks:{display:false}
        },
        y:{
          grid:{display:false},
          ticks:{
            display:false,        // ★ 기본 라벨 숨기고 우리가 그림
            padding:0
          }
        }
      },
      layout:{
        padding:{
          top:designPxToRealPx(6),
          bottom:designPxToRealPx(6),
          left:designPxToRealPx(280), // ★ 타이틀 영역 확보(간격 넓어짐)
          right:designPxToRealPx(8)
        }
      }
    },
    plugins:[separatorLinesPlugin, trackPlugin, labelCenterPlugin]
  });
});

</script>




<!-- 상세페이지 기술 등급 팝업 내 > 기술 경쟁력 방사형, 바 그래프 차트 -->