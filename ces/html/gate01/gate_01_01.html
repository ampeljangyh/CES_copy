<!DOCType html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, user-scalable=0">
<meta name="msapplication-TileColor" content="#4D6EDB">
<meta property="og:title" content="">
<meta property="og:description" content="">
<meta property="og:Type" content="website">
<meta property="og:image" content="../../resources/images/">
<title></title>
<link rel="shortcut icon" href="../../resources/images/" type="image/x-icon">
<link rel="apple-touch-icon" href="../../resources/images/">
<link rel="stylesheet" href="../../resources/css/style.css">

<!-- 퍼블리싱 -->
<script src="../../resources/js/jquery-3.7.1.min.js"></script>
<script src="../../resources/js/jquery-ui.js"></script>
<script src="../../resources/js/swiper-bundle.min.js"></script>
<script src="../../resources/js/chart.js"></script>
<!-- //퍼블리싱 -->
</head>

<body class="gate_01_01">
<!-- wrap -->
<div id="wrap" class="com_bg gate_01_main">
    <!-- Header -->
    <header>
    </header>
    <!-- //Header -->

    <!-- Container -->
    <section id="container" class="gate_01">
        <div class="snb">
            <div class="snb_inner">
                <a href="../main.html" class="logo">
                    <img src="../../resources/images/logo.png">
                </a>
                <div class="menu">
                    <ul>
                        <li>
                            <a href="../main.html" class="menu_item ico_01">메인</a>
                        </li>
                        <li>
                            <a href="../gate01/gate_01.html" class="menu_item ico_02 active">기술 금융 시스템</a>
                        </li>
                        <li>
                            <a href="../gate02/gate_02.html" class="menu_item ico_03">K-콘텐츠 투자</a>
                        </li>
                        <li>
                            <a href="../gate03/gate_03.html" class="menu_item ico_04">ESG 정밀진단 시스템</a>
                        </li>
                    </ul>
                </div>
                <div class="lang">
                    <button type="button" class="btn_lang">
                        <span class="en">English</span>
                        <span class="kr">한국어</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="contents">
            <div class="contents_01">
                <section class="card_detail blend" id="cardDetail01">
                    <div class="card_detail_inner">
                        <div class="as_step_dot">
                            <div class="inner">
                                <div class="shiny_step dot_cs">
                                    <ul>
                                        <li class="on">
                                        </li> 
                                        <li>
                                        </li>
                                        <li>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="as_step_box step_box_01" data-target="st01">
                            <div class="as_step_inner">
                                <div class="as_card_detail_cont">
                                    <!-- STEP 1 -->
                                    <div class="s1">
                                        <div class="card_detail_txt">
                                        <strong>신용 평가</strong>
                                        <p>해당 스타트업의 신용도를 평가하여 지원 가능한 금융 상품을 제안합니다.</p>
                                        <span>*해당 평가는 일반적으로 은행의 여신 심사 및 대출 결정에 활용되는 평가모형입니다.</span>
                                        </div>

                                        <div class="prog_ico">
                                            <div class="ico_inner">
                                                <div class="prog_mp_item cir_02">
                                                <video class="cir" src="../../resources/images/circle_02.mp4" autoplay muted loop playsinline></video>
                                                <!-- <video class="cen" src="../../resources/images/ibk.mp4" autoplay muted loop playsinline></video> -->
                                                </div>
                                                <div class="per_ing">
                                                <span>0</span>%
                                                </div>
                                            </div>
                                        </div>

                                        <div class="desc s1_1">
                                            <div class="desc_com">
                                                <img src="../../resources/images/search_result_01.jpg">
                                            </div>
                                            <span>기업 신용 평가를 위해 정보를 확인하고 있습니다.</span>
                                        </div>

                                        <div class="credit_rating_list s1_1">
                                        <div class="inner">
                                            <ul>
                                            <li><span class="ch"></span><span class="text">기업실태표</span></li>
                                            <li><span class="ch"></span><span class="text">사업자등록증명</span></li>
                                            <li><span class="ch"></span><span class="text">주주명부</span></li>
                                            <li><span class="ch"></span><span class="text">재무재표</span></li>
                                            <li><span class="ch"></span><span class="text">부가세자료</span></li>
                                            <li><span class="ch"></span><span class="text">법인등기기부등본</span></li>
                                            <li><span class="ch"></span><span class="text">재무 비율 분석</span></li>
                                            <li><span class="ch"></span><span class="text">사업 실적</span></li>
                                            <li><span class="ch"></span><span class="text">금융거래 내역</span></li>
                                            <li><span class="ch"></span><span class="text">재무 비율 분석</span></li>
                                            </ul>
                                        </div>
                                        </div>
                                    </div>

                                    <!-- STEP 2 -->
                                    <div class="s2">
                                        <div class="card_detail_txt">
                                        <strong>신용 평가 결과</strong>
                                        <p>해당 스타트업의 신용도를 평가하여 지원 가능한 금융 상품을 제안합니다.</p>
                                        <span>*해당 평가는 일반적으로 은행의 여신 심사 및 대출 결정에 활용되는 평가모형입니다.</span>
                                        </div>

                                        <!-- 상단 등급 슬라이더 -->
                                        <div class="credit_rating_re">
                                        <div class="inner">
                                            <div class="grade_slider">
                                            <div class="grade_slider_info">
                                                <div class="l">
                                                <span class="cla">A-</span>
                                                <span class="cla_per">(상위 19%)</span>
                                                </div>
                                                <div class="r"><span>우수</span></div>
                                            </div>

                                            <div class="grade_track">
                                                <div class="grade_fill"></div>
                                                <div class="grade_thumb"></div>
                                            </div>

                                            <div class="grade_label_wrap">
                                                <ul class="grade_labels">
                                                <li>D</li>
                                                <li>C</li>
                                                <li>CC</li>
                                                <li>CCC</li>
                                                <li class="on">B</li>
                                                <li>BB</li>
                                                <li>BBB</li>
                                                <li>A</li>
                                                <li>AA</li>
                                                <li>AAA</li>
                                                </ul>
                                            </div>
                                            </div>
                                        </div>
                                        </div>

                                        <!-- 하단 상품 지원 가능성 -->
                                        <div class="credit_rating_possi">
                                        <div class="inner">
                                            <div class="tit">
                                            <strong>상품 지원 가능성</strong>
                                            <div class="pos_re"><span>매칭 불가</span></div>
                                            </div>
                                            <div class="possi_list">
                                            <ul>
                                                <li>
                                                <div class="txt"><span>금융 상품</span></div>
                                                <div class="gp">
                                                    <div class="gp_item">
                                                    <div class="gp_bar"></div>
                                                    </div>
                                                    <div class="per"><span>0</span>%</div>
                                                </div>
                                                </li>
                                                <li>
                                                <div class="txt"><span>비금융 상품</span></div>
                                                <div class="gp">
                                                    <div class="gp_item">
                                                    <div class="gp_bar"></div>
                                                    </div>
                                                    <div class="per"><span>0</span>%</div>
                                                </div>
                                                </li>
                                            </ul>
                                            </div>
                                        </div>
                                        </div>

                                        <!-- 안내 박스 -->
                                        <div class="re_confirm">
                                            <div class="inner">
                                                <div class="desc">
                                                <p>
                                                    IBK 기술 평가 시스템 추가 분석 시 <span>지원 가능 상품</span>을 찾을 수도 있습니다.<br>
                                                    예상 결과를 먼저 확인하시겠습니까?
                                                </p>
                                                </div>
                                                <div class="btn_box">
                                                <button type="button" class="btn" data-target="tec01">기술평가 예상 결과 확인</button>
                                                </div>
                                            </div>
                                        </div>

                                    </div><!-- .s2 -->
                                </div>
                            </div>
                        </div>

                        <div class="as_step_box step_box_02" data-target="st02">
                            <div class="as_step_inner">
                                <div class="as_card_detail_cont">
                                    <!-- STEP 1 -->
                                    <div class="s1">
                                        <div class="card_detail_txt">
                                        <strong>기술 평가</strong>
                                        <p>해당 스타트업의 보유 기술의 가치를 평가하여 지원 가능한 금융 상품을 제안합니다.</p>
                                        <span>*해당 평가는 IBK만의 기술 평가 시스템을 통해 분석됩니다.</span>
                                        </div>
 
                                        <div class="prog_ico">
                                        <div class="ico_inner">
                                            <div class="prog_mp_item">
                                            <!-- <video class="cir" src="../../resources/images/circle_01.mp4" autoplay muted loop playsinline></video> -->
                                            <video class="cen cen_01 cen_sz_02" src="../../resources/images/cer2_02.mp4" autoplay muted loop playsinline></video>
                                            <video class="cen cen_02 cen_sz_02" src="../../resources/images/check_1_02.mp4" autoplay muted loop playsinline></video>
                                            </div>
                                            <div class="per_ing">
                                            <span>0</span>%
                                            </div>
                                        </div>
                                        </div>

                                        <div class="desc s1_1">
                                            <div class="desc_com">
                                                <img src="../../resources/images/search_result_01.jpg">
                                            </div>
                                            <span class="desc_01">의 기술 평가를 위해 특허청 정보를 확인하고 있습니다.</span>
                                            <span class="desc_02">정보 수집 완료</span>
                                        </div>

                                        <div class="st_02_btn">
                                            <button type="button" class="btn">
                                                <span>평가 진행하기</span>
                                            </button>
                                        </div>

                                        <!-- 하단 상품 지원 가능성 -->
                                        <div class="credit_rating_possi">
                                            <div class="inner">
                                                <div class="tit">
                                                <strong>상품 지원 가능성</strong>
                                                </div>
                                                <div class="possi_list">
                                                <ul>
                                                    <li>
                                                    <div class="txt"><span>금융 상품</span></div>
                                                    <div class="gp">
                                                        <div class="gp_item">
                                                        <div class="gp_bar"></div>
                                                        </div>
                                                        <div class="per"><span>0</span>%</div>
                                                    </div>
                                                    </li>
                                                    <li>
                                                    <div class="txt"><span>비금융 상품</span></div>
                                                    <div class="gp">
                                                        <div class="gp_item">
                                                        <div class="gp_bar"></div>
                                                        </div>
                                                        <div class="per"><span>0</span>%</div>
                                                    </div>
                                                    </li>
                                                </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- STEP 2 -->
                                    <div class="s2">
                                        <div class="card_detail_txt">
                                        <strong>기술 평가</strong>
                                        <p>해당 스타트업의 보유 기술의 가치를 평가하여 지원 가능한 금융 상품을 제안합니다.</p>
                                        <span>*해당 평가는 IBK만의 기술 평가 시스템을 통해 분석됩니다.</span>
                                        </div>

                                        <!-- 상단 등급 슬라이더 -->
                                        <div class="credit_rating_re step_01">
                                            <div class="inner">
                                                <div class="credit_rating_top">
                                                    <div class="top_sub sub01">
                                                        <span>수집된 정보를 바탕으로</span>
                                                    </div>
                                                    <div class="top_sub sub02">
                                                        <img src="../../resources/images/search_result_01.jpg">
                                                    </div>
                                                    <div class="top_sub sub03">
                                                        <span>의 기술 평가를 진행합니다.</span>
                                                    </div>
                                                </div>
                                                <div class="grade_slider">
                                                    <ul>
                                                        <li>
                                                            <div class="grade_slider_tit">
                                                                <span>제품화 역량</span>
                                                            </div>
                                                            <div class="grade_track">
                                                                <div class="grade_fill"></div>
                                                                <div class="grade_thumb"></div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="grade_slider_tit">
                                                                <span>수익 전망</span>
                                                            </div>
                                                            <div class="grade_track">
                                                                <div class="grade_fill"></div>
                                                                <div class="grade_thumb"></div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="grade_slider_tit">
                                                                <span>기술 우위성</span>
                                                            </div>
                                                            <div class="grade_track">
                                                                <div class="grade_fill"></div>
                                                                <div class="grade_thumb"></div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="grade_slider_tit">
                                                                <span>시장현황</span>
                                                            </div>
                                                            <div class="grade_track">
                                                                <div class="grade_fill"></div>
                                                                <div class="grade_thumb"></div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="grade_slider_tit">
                                                                <span>제품 우위성</span>
                                                            </div>
                                                            <div class="grade_track">
                                                                <div class="grade_fill"></div>
                                                                <div class="grade_thumb"></div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                    
                                                </div>

                                                <div class="credit_rating_com">
                                                    <div class="img_box">
                                                        <!-- <video class="cir" src="../../resources/images/circle_01.mp4" autoplay muted loop playsinline></video> -->
                                                        <video class="cen cen_sz_02" src="../../resources/images/check_1.mp4 " autoplay muted loop playsinline></video>
                                                    </div>
                                                    <div class="col_text_ef">
                                                        <span>기술 평가 완료</span>
                                                    </div>
                                                    <div class="btn_result_report">
                                                        <button type="button" class="btn_report">
                                                            <span>결과받기</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- 상단 등급 슬라이더 -->
                                        <div class="credit_rating_re step_02">
                                            <div class="inner">
                                                <div class="grade_slider">
                                                <div class="grade_slider_info">
                                                    <div class="l">
                                                    <span class="cla">T4-</span>
                                                    <span class="cla_per">(상위 32%)</span>
                                                    </div>
                                                    <div class="r"><span>양호</span></div>
                                                </div>

                                                <div class="grade_track">
                                                    <div class="grade_fill"></div>
                                                    <div class="grade_thumb"></div>
                                                </div>

                                                <div class="grade_label_wrap">
                                                    <ul class="grade_labels">
                                                    <li>T10</li>
                                                    <li>T9</li>
                                                    <li>T8</li>
                                                    <li>T7</li>
                                                    <li class="on">T6</li>
                                                    <li>T5</li>
                                                    <li>T4</li>
                                                    <li>T3</li>
                                                    <li>T2</li>
                                                    <li>T1</li>
                                                    </ul>
                                                </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 하단 상품 지원 가능성 -->
                                        <div class="credit_rating_possi">
                                            <div class="inner">
                                                <div class="tit">
                                                <strong>상품 지원 가능성</strong>
                                                </div>
                                                <div class="possi_list">
                                                <ul>
                                                    <li>
                                                    <div class="txt"><span>금융 상품</span></div>
                                                    <div class="gp">
                                                        <div class="gp_item">
                                                        <div class="gp_bar"></div>
                                                        </div>
                                                        <div class="per"><span>0</span>%</div>
                                                    </div>
                                                    </li>
                                                    <li>
                                                    <div class="txt"><span>비금융 상품</span></div>
                                                    <div class="gp">
                                                        <div class="gp_item">
                                                        <div class="gp_bar"></div>
                                                        </div>
                                                        <div class="per"><span>0</span>%</div>
                                                    </div>
                                                    </li>
                                                </ul>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- 안내 박스 -->
                                        <div class="re_confirm">
                                            <div class="inner">
                                                <div class="desc">
                                                <p>
                                                    상품 지원 가능성이 상승할 수 있는 결과입니다.<br>
                                                    신용 평가 기관으로부터 기술신용평가서 수신 시 최종 등급을 확인할 수 있습니다.
                                                </p>
                                                </div>
                                                <div class="btn_box">
                                                <button type="button" class="btn" data-target="tec02">기술신용평가서 받기</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div><!-- .s2 -->
                                </div>
                            </div>
                        </div>

                        <div class="as_step_box step_box_03" data-target="st03">
                            <div class="as_step_inner">
                                <div class="as_card_detail_cont">
                                    <!-- STEP 1 -->
                                    <div class="s1">
                                        <div class="card_detail_txt">
                                            <strong>미래 성장성 평가</strong>
                                            <p>해당 스타트업의 보유 기술의 가치를 평가하여 지원 가능한 금융 상품을 제안합니다.</p>
                                            <span>*해당 평가는 IBK만의 기술 평가 시스템을 통해 분석됩니다.</span>
                                        </div>

                                        <div class="prog_ico">
                                            <div class="ico_inner">
                                                <div class="prog_mp_item">
                                                <video class="cir" src="../../resources/images/loading_img2.mp4" autoplay muted loop playsinline></video>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="desc s1_1">
                                            <div class="desc_com">
                                                <img src="../../resources/images/search_result_01.jpg">
                                            </div>
                                            <span>의 미래 성장성 평가를 위한 정보를 확인하고 있습니다.</span>
                                        </div>

                                        <div class="grade_slider"> 
                                            <ul>
                                                <li>
                                                    <div class="grade_slider_tit">
                                                        <span>높은 기술 준비도</span>
                                                    </div>
                                                    <div class="grade_track">
                                                        <div class="grade_fill"></div>
                                                        <div class="grade_thumb"></div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="grade_slider_tit">
                                                        <span>사업초기 수익성</span>
                                                    </div>
                                                    <div class="grade_track">
                                                        <div class="grade_fill"></div>
                                                        <div class="grade_thumb"></div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="grade_slider_tit">
                                                        <span>외형 지표 가시화</span>
                                                    </div>
                                                    <div class="grade_track">
                                                        <div class="grade_fill"></div>
                                                        <div class="grade_thumb"></div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="grade_slider_tit">
                                                        <span>해외 진출출 활성화</span>
                                                    </div>
                                                    <div class="grade_track">
                                                        <div class="grade_fill"></div>
                                                        <div class="grade_thumb"></div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="grade_slider_tit">
                                                        <span>정부 출연금 확보</span>
                                                    </div>
                                                    <div class="grade_track">
                                                        <div class="grade_fill"></div>
                                                        <div class="grade_thumb"></div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>

                                        <!-- 상단 등급 슬라이더 -->
                                        <div class="credit_rating_re">
                                            <div class="inner">
                                                <div class="grade_slider">
                                                    <div class="grade_slider_info">
                                                        <div class="l">
                                                            <span class="cla">98.4408</span>
                                                            <span class="cla_per">(상위 9.2%)</span>
                                                        </div>
                                                        <div class="r"><span></span></div>
                                                    </div>

                                                    <div class="grade_track">
                                                        <div class="grade_fill"></div>
                                                        <div class="grade_thumb"></div>
                                                    </div>

                                                    <div class="grade_label_wrap">
                                                        <ul class="grade_labels">
                                                            <li>0</li>
                                                            <li>10</li>
                                                            <li>20</li>
                                                            <li>30</li>
                                                            <li class="on">40</li>
                                                            <li>50</li>
                                                            <li>60</li>
                                                            <li>70</li>
                                                            <li>80</li>
                                                            <li>90</li>
                                                            <li>100</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div> 

                                        <!-- 하단 상품 지원 가능성 -->
                                        <div class="credit_rating_possi">
                                            <div class="inner">
                                                <div class="tit">
                                                <strong>상품 지원 가능성</strong>
                                                </div>
                                                <div class="possi_list">
                                                <ul>
                                                    <li>
                                                    <div class="txt"><span>금융 상품</span></div>
                                                    <div class="gp">
                                                        <div class="gp_item">
                                                        <div class="gp_bar"></div>
                                                        </div>
                                                        <div class="per"><span>0</span>%</div>
                                                    </div>
                                                    </li>
                                                    <li>
                                                    <div class="txt"><span>비금융 상품</span></div>
                                                    <div class="gp">
                                                        <div class="gp_item">
                                                        <div class="gp_bar"></div>
                                                        </div>
                                                        <div class="per"><span>0</span>%</div>
                                                    </div>
                                                    </li>
                                                </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- 안내 박스 -->
                                        <div class="re_confirm">
                                            <div class="inner">
                                                <div class="desc">
                                                    <p>
                                                        <span class="img_box"><img src=""></span>에 지원 가능한 상품 리스트를 지금 확인해보세요.
                                                    </p>
                                                </div>
                                                <div class="btn_box">
                                                    <button type="button" class="btn" data-target="tec03">지원 가능한 상품 확인</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                    </div>
                </section>
            </div>
        </div>
    </section>
    <!-- //Container -->

    <!-- Footer -->
    <footer>
    </footer>
    <!-- //Footer -->
</div>
<!-- //wrap -->






<div class="as_expec_pop cardDetailPop01" id="tec01">
    <div class="inner">
        <div class="txt">
            <span class="sub">IBK 기술 평가 시스템</span>
            <strong class="tit">기술 평가 예상 결과</strong>
        </div>
        <div class="com_pu">
            <div class="com_ico">
                <img src="../../resources/images/search_result_01.jpg">
            </div>
            <span class="text">기술력 분석 시 아래와 같은 결과가 예상됩니다.</span>
        </div>
        <div class="context">
            <div class="inner">
                <div class="con_txt">
                    <span>기술 평가</span>
                </div>
                <div class="con_mp">
                    <video src="../../resources/images/one_1.mp4" autoplay muted loop playsinline></video>
                </div>
                <div class="con_re">
                    <span class="tit">예상 등급</span>
                    <div class="con_re_content">
                        <p>
                            <span>T3</span>(양호)
                        </p>
                    </div>
                </div>
            </div>
            <div class="btn_pop_box">
                <button type="button" class="btn_pop">기술평가 진행</button>
            </div>
        </div>
    </div>
</div>

<div class="as_expec_pop cardDetailPop01 tec_02" id="tec02">
    <div class="inner">
        <strong class="tit">기술 평가서 수신중</strong>
        <div class="credit_rating_pop">
            <div class="rating_pop_sub sub01">
                <span>신용평가기관으로 부터</span>
            </div>
            <div class="rating_pop_sub sub02">
                <img src="../../resources/images/search_result_01.jpg">
            </div>
            <div class="rating_pop_sub sub03">
                <span>의 기술신용평가서를 수신받고 있습니다.</span>
            </div>
        </div>
        <div class="rating_pop_img">
            <video class="cir" src="../../resources/images/loading_img2.mp4" autoplay muted loop playsinline></video>
        </div>
    </div>

    <div class="tec_credit_form">
        <div class="form_inner">
            <strong class="tit">기술 신용 평가서</strong>
            <div class="credit_content">
                <div class="ga">
                    <div class="tit">
                        <span>기술신용 등급</span>
                    </div>
                    <div class="ga_item js-ga">
                        <div class="ga_arc"></div> <!-- 막대 게이지 생성되는 영역 -->

                        <div class="ga_item_info">
                            <span class="top">A+</span>
                            <span class="bot">(우수)</span>
                            <span class="dot_b"></span>
                        </div>
                    </div>
                </div>
                <div class="gp">
                    <div class="credit_rating_re">
                        <div class="inner">
                            <div class="grade_slider">
                                <div class="grade_slider_info">
                                    <div class="l">
                                    <span class="cla">A-</span>
                                    <span class="cla_per"> (상위 57%)</span>
                                    </div>
                                    <div class="r"><span>우수</span></div>
                                </div>

                                <div class="grade_track">
                                    <div class="grade_fill"></div>
                                    <div class="grade_thumb"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="credit_rating_re">
                        <div class="inner">
                            <div class="grade_slider">
                                <div class="grade_slider_info">
                                    <div class="l">
                                    <span class="cla">T4-</span>
                                    <span class="cla_per"> (상위 57%)</span>
                                    </div>
                                    <div class="r"><span>양호</span></div>
                                </div>

                                <div class="grade_track">
                                    <div class="grade_fill"></div>
                                    <div class="grade_thumb"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="desc_credit">
                <p>
                    동사는 당행의 기술평가 모형에 의하여 기술환경 변화에 다소 영향을 받을 수 있으며, 기술경쟁력과 기술사업화 역량을 반영한 미래성장가능성이 양호하나 T4보다 다소 낮은 기업으로 파악되는 바, 기술등급은 “T4-”로 평가함. 동사의 신용등급은 당행의 신용평가 모형에 의하여 영업기반 및 재무상태가 중위권으로 일반적 경기침체기에도 재무상태가 저하될 우려가 다소 있으나 현재 채무상환능력은 양호하고 A보다 다소 낮은 “A-”로 평가함. 동사의 기술등급과 신용등급을 결합한 기술신용등급은 기업의 기술경쟁력과 기술사업화 역량을 반영한 기술신용상태가 우수하고 A보다 다소 높은 “A+”로 평가함.
                </p>
            </div>
            <div class="possi_item">
                <div class="credit_rating_possi">
                    <div class="inner">
                        <div class="tit">
                            <strong>상품 지원 가능성</strong>
                        </div>
                        <div class="possi_list">
                            <ul>
                                <li>
                                <div class="txt"><span>금융 상품</span></div>
                                <div class="gp">
                                    <div class="gp_item">
                                    <div class="gp_bar"></div>
                                    </div>
                                    <div class="per"><span>0</span>%</div>
                                </div>
                                </li>
                                <li>
                                <div class="txt"><span>비금융 상품</span></div>
                                <div class="gp">
                                    <div class="gp_item">
                                    <div class="gp_bar"></div>
                                    </div>
                                    <div class="per"><span>0</span>%</div>
                                </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="confirm_item">
                <div class="re_confirm">
                    <div class="inner">
                        <div class="desc">
                        <p>
                            IBK 기술 평가 시스템의 미래 성장성 분석 시<br>
                            더 많은 상품 지원 가능성을 찾을 수도 있습니다.
                        </p>
                        </div>
                        <div class="btn_box">
                        <button type="button" class="btn">미래 성장성 분석 진행</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="as_expec_pop cardDetailPop01 tec_04" id="tec03">
    <div class="btn_wrap">
        <div class="inner">
            <strong class="tit">지원 가능 상품</strong>
            <p>기업의 현재 성장 위치 및 상황에 적합한 지원 가능 상품입니다.</p>
            <div class="step_03_resilt">
                <div class="step_03_resilt_list">
                    <div class="logo_box">
                        <div class="logo_item">
                            <img src="../../resources/images/dollar_3d.png">
                        </div>
                        <div class="logo_text">
                            <span>금융 상품</span>
                        </div>
                    </div>
                    <div class="step_resilt_list">
                        <ul>
                            <li>
                                <div class="item">
                                    <span>상품A</span>
                                    <p>어쩌고저쩌고한 상품</p>
                                </div>
                            </li>
                            <li>
                                <div class="item">
                                    <span>상품A</span>
                                    <p>어쩌고저쩌고한 상품</p>
                                </div>
                            </li>
                            <li>
                                <div class="item">
                                    <span>상품A</span>
                                    <p>어쩌고저쩌고한 상품</p>
                                </div>
                            </li>
                            <li>
                                <div class="item">
                                    <span>상품A</span>
                                    <p>어쩌고저쩌고한 상품</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="step_03_resilt_list">
                    <div class="logo_box">
                        <div class="logo_item">
                            <img src="../../resources/images/gift_3d.png">
                        </div>
                        <div class="logo_text">
                            <span>비금융 상품</span>
                        </div>
                    </div>
                    <div class="step_resilt_list">
                        <ul>
                            <li>
                                <div class="item">
                                    <span>상품A</span>
                                    <p>어쩌고저쩌고한 상품</p>
                                </div>
                            </li>
                            <li>
                                <div class="item">
                                    <span>상품A</span>
                                    <p>어쩌고저쩌고한 상품</p>
                                </div>
                            </li>
                            <li>
                                <div class="item">
                                    <span>상품A</span>
                                    <p>어쩌고저쩌고한 상품</p>
                                </div>
                            </li>
                            <li>
                                <div class="item">
                                    <span>상품A</span>
                                    <p>어쩌고저쩌고한 상품</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="bot_brn">
            <a class="btn" href="../gate01/gate_01_01_detail.html" target="_self">
                <span>IBK 기술과 자본의 만남 결과 확인</span>
            </a>
        </div>
    </div>
</div>
</body>
</html>
<script>
/* Gate 01 Card Detail */
document.addEventListener('DOMContentLoaded', function () {
  var cards = document.querySelectorAll('.card_detail');
  cards.forEach(function (card) {
    initCardDetailAnimation(card);
  });
});

/* -----------------------------
   공통 카드 초기/시퀀스 (주로 step_box_01용)
------------------------------*/
function initCardDetailAnimation(card) {
  if (!card) return;

  var prevHasIsShow = card.classList.contains('is-show');

  var observer = new MutationObserver(function (mutations) {
    mutations.forEach(function (m) {
      if (m.type === 'attributes' && m.attributeName === 'class') {
        var nowHasIsShow = card.classList.contains('is-show');

        if (!prevHasIsShow && nowHasIsShow) {
          setTimeout(function () {
            resetCardDetailState(card);
            runCardDetailSequence(card);
          }, 1000);
        }
        prevHasIsShow = nowHasIsShow;
      }
    });
  });

  observer.observe(card, { attributes: true });
}

function resetCardDetailState(card) {
  // ★ step_box_01 범위만 초기화 (step_box_02는 건드리지 않음)
  var stepBox1 = card.querySelector('.as_step_box.step_box_01');
  if (stepBox1) {
    var span = stepBox1.querySelector('.per_ing span');
    if (span) span.textContent = '0';

    var checks = stepBox1.querySelectorAll('.credit_rating_list .inner > ul > li .ch');
    checks.forEach(function (ch) { ch.classList.remove('on'); });

    var container = stepBox1.querySelector('.credit_rating_list');
    if (container) container.scrollTop = 0;

    var s1 = stepBox1.querySelector('.as_card_detail_cont .s1');
    var s2 = stepBox1.querySelector('.as_card_detail_cont .s2');

    if (s1) {
      s1.style.display = '';
      s1.style.opacity = '1';
      s1.style.transform = 'translateY(0)';
      s1.style.pointerEvents = 'auto';
      s1.style.transition = '';
    }
    if (s2) {
      s2.style.display = 'none';
      s2.style.opacity = '0';
      s2.style.transform = 'translateY(0.52vw)';
      s2.style.pointerEvents = 'none';
      s2.style.transition = '';
      s2.classList.remove('on');
      s2.dataset.step02Done = '0';
    }

    var gradeFill = stepBox1.querySelector('.credit_rating_re .grade_fill');
    var gradeThumb = stepBox1.querySelector('.credit_rating_re .grade_thumb');
    if (gradeFill) gradeFill.style.width = '0%';
    if (gradeThumb) gradeThumb.style.left = '0%';

    var possiBars = stepBox1.querySelectorAll('.credit_rating_possi .gp_bar');
    var possiPer = stepBox1.querySelectorAll('.credit_rating_possi .per span');
    possiBars.forEach(function (bar) { bar.style.width = '0%'; });
    possiPer.forEach(function (el) { el.textContent = '0'; });

    var info = stepBox1.querySelector('.credit_rating_re .grade_slider_info');
    if (info) info.classList.remove('is-show');

    // ★ step_box_01 의 re_confirm는 is-show만 제어 (display/opacity/transform은 CSS)
    var reConfirms = stepBox1.querySelectorAll('.re_confirm');
    reConfirms.forEach(function (box) {
      box.classList.remove('is-show');
    });
  }
}

function runCardDetailSequence(card) {
  // ★ step_box_01 기준으로만 실행
  var stepBox1 = card.querySelector('.as_step_box.step_box_01');
  if (!stepBox1) return;
  animatePercent(stepBox1);
  animateChecklist(stepBox1);
}

// 0 → 100, 5초 (step_box_01 기준)
function animatePercent(container) {
  var span = container.querySelector('.per_ing span');
  if (!span) return;
  animatePercentOnSpan(span, 5000);
}

// 특정 span을 0→100 카운트 (linear)
function animatePercentOnSpan(span, duration, onComplete) {
  var startTime = null;
  function step(timestamp) {
    if (!startTime) startTime = timestamp;
    var progress = Math.min((timestamp - startTime) / duration, 1);
    var value = Math.round(100 * progress);
    span.textContent = value;
    if (progress < 1) {
      requestAnimationFrame(step);
    } else if (typeof onComplete === 'function') {
      onComplete();
    }
  }
  requestAnimationFrame(step);
}

// 체크리스트 + 스크롤(5초) 후 s1→s2 (step_box_01용)
function animateChecklist(container) {
  var checks = container.querySelectorAll('.credit_rating_list .inner > ul > li .ch');
  var scrollBox = container.querySelector('.credit_rating_list');
  if (!checks.length || !scrollBox) return;

  var totalDuration = 5000;
  var count = checks.length;
  var delay = totalDuration / count;
  var scrollStepPx = 101;
  var scrollDuration = delay;
  var lastIndex = count - 1;

  checks.forEach(function (ch, index) {
    setTimeout(function () {
      ch.classList.add('on');

      if (index >= 6) {
        smoothScrollByPx(scrollBox, scrollStepPx, scrollDuration);
      }

      if (index === lastIndex) {
        setTimeout(function () {
          switchToStep2(container);
        }, scrollDuration + 100);
      }
    }, delay * index);
  });
}

function smoothScrollByPx(el, px, duration) {
  var start = el.scrollTop;
  var target = start + px;
  var distance = target - start;
  var startTime = null;

  function step(timestamp) {
    if (!startTime) startTime = timestamp;
    var rawProgress = Math.min((timestamp - startTime) / duration, 1);
    var eased = rawProgress * rawProgress * rawProgress;
    el.scrollTop = start + distance * eased;
    if (rawProgress < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

// s1 위로 사라지고 s2 위로 등장 + (신용평가 카드용) 결과 애니 시작 (step_box_01용)
function switchToStep2(container) {
  var s1 = container.querySelector('.as_card_detail_cont .s1');
  var s2 = container.querySelector('.as_card_detail_cont .s2');
  if (!s1 || !s2) return;

  s1.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
  s2.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
  s2.style.display = 'block';

  requestAnimationFrame(function () {
    s1.style.opacity = '0';
    s1.style.transform = 'translateY(-0.52vw)';
    s1.style.pointerEvents = 'none';

    s2.style.opacity = '1';
    s2.style.transform = 'translateY(0)';
    s2.style.pointerEvents = 'auto';

    setTimeout(function () {
      startResultAnimations(container);
    }, 300);
  });

  var done = false;
  var handler = function (e) {
    if (e.propertyName !== 'opacity' || done) return;
    done = true;
    s1.style.display = 'none';
    s1.removeEventListener('transitionend', handler);
  };
  s1.addEventListener('transitionend', handler);
}

// 공통 ease-out 애니
function animateValue(start, end, duration, onUpdate, onComplete) {
  var startTime = null;
  function easeOutCubic(t) { return 1 - Math.pow(1 - t, 3); }

  function step(timestamp) {
    if (!startTime) startTime = timestamp;
    var progress = Math.min((timestamp - startTime) / duration, 1);
    var eased = easeOutCubic(progress);
    var value = start + (end - start) * eased;
    onUpdate(value);
    if (progress < 1) {
      requestAnimationFrame(step);
    } else if (typeof onComplete === 'function') {
      onComplete();
    }
  }
  requestAnimationFrame(step);
}

// 신용평가 결과(슬라이더+바) – step_box_01용
function startResultAnimations(container) {
  var gradeFill  = container.querySelector('.credit_rating_re .grade_fill');
  var gradeThumb = container.querySelector('.credit_rating_re .grade_thumb');
  var gradeInfo  = container.querySelector('.credit_rating_re .grade_slider_info');

  var possiBars  = container.querySelectorAll('.credit_rating_possi .gp_bar');
  var possiPer   = container.querySelectorAll('.credit_rating_possi .per span');
  var reConfirm  = container.querySelector('.re_confirm');

  var gradeTarget = 70;
  var barTarget   = 30;
  var duration    = 2000;
  var offset1     = 200;
  var offset2     = 400;

  if (gradeFill && gradeThumb) {
    animateValue(0, gradeTarget, duration, function (v) {
      var val = Math.round(v * 10) / 10;
      gradeFill.style.width = val + '%';
      gradeThumb.style.left = val + '%';
    });
  }

  if (possiBars[0]) {
    setTimeout(function () {
      animateValue(0, barTarget, duration, function (v) {
        var val = Math.round(v * 10) / 10;
        possiBars[0].style.width = 20 + '%';
      });
    }, offset1);
  }

  if (possiBars[1]) {
    setTimeout(function () {
      animateValue(0, barTarget, duration, function (v) {
        var val = Math.round(v * 10) / 10;
        possiBars[1].style.width = 30 + '%';
      });

      animateValue(0, barTarget, duration, function (v) {
        var iv = Math.round(v);
        possiPer.forEach(function (el) {
          el.textContent = iv;
        });
      }, function () {
        if (gradeInfo) gradeInfo.classList.add('is-show');
        if (reConfirm) {
          // ★ step_box_01 : CSS에서 .re_confirm / .re_confirm.is-show로 제어
          setTimeout(function () {
            reConfirm.classList.add('is-show');
          }, 500);
        }
      });

    }, offset2);
  }
}

/* -----------------------------
   기술평가 팝업 & step_box_02 연동
------------------------------*/
document.addEventListener('DOMContentLoaded', function () {
  /* -----------------------------
     data-target 팝업 오픈 공통
     - cardDetail01 → .cardDetailPop01 안에서만
     - cardDetail02 → .cardDetailPop02 안에서만
  ------------------------------*/
   document.addEventListener('click', function (e) {
    var trigger = e.target.closest('[data-target]');
    if (!trigger) return;

    var targetId = trigger.getAttribute('data-target');
    if (!targetId) return;

    // 전역에서 팝업 id로 먼저 찾기
    var pop = document.getElementById(targetId);
    if (!pop || !pop.classList.contains('as_expec_pop')) return;

    // 클릭이 cardDetail01/02 안에서 발생했는지 체크
    var inCardDetail01 = !!trigger.closest('#cardDetail01');
    var inCardDetail02 = !!trigger.closest('#cardDetail02');

    // .cardDetailPop01 은 cardDetail01 안에서만 열리게
    if (pop.classList.contains('cardDetailPop01') && !inCardDetail01) {
      return;
    }

    // .cardDetailPop02 은 cardDetail02 안에서만 열리게
    if (pop.classList.contains('cardDetailPop02') && !inCardDetail02) {
      return;
    }

    // 조건 통과한 팝업만 실제 오픈
    pop.classList.add('is-show');

    // ★ tec02 전용 시퀀스 유지
    if (targetId === 'tec02') {
      startTec02Sequence(pop);
    }
  });

  // 팝업 오버레이 클릭시 닫기
  document.querySelectorAll('.as_expec_pop').forEach(function (pop) {
    pop.addEventListener('click', function (e) {
      if (e.target === pop) {
        pop.classList.remove('is-show');
      }
    });
  });

  // ESC 닫기
  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape') {
      document.querySelectorAll('.as_expec_pop.is-show').forEach(function (pop) {
        pop.classList.remove('is-show');
      });
    }
  });

  // 팝업 안의 "기술평가 진행" 버튼 → step_box_01 → step_box_02 전환 + 1차 애니
  var techPop = document.getElementById('tec01');
  if (techPop) {
    var techBtn = techPop.querySelector('.btn_pop');
    if (techBtn) {
      techBtn.addEventListener('click', function () {
        techPop.classList.remove('is-show');

        var stepBox1 = document.querySelector('.as_step_box.step_box_01');
        var stepBox2 = document.querySelector('.as_step_box.step_box_02');
        if (!stepBox1 || !stepBox2) return;

        stepBox1.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
        stepBox2.style.transition = 'opacity 0.8s ease,transform 0.8s ease';

        stepBox2.style.display = 'block';
        stepBox2.style.opacity = '0';
        stepBox2.style.transform = 'translateY(0.52vw)';
        stepBox2.style.pointerEvents = 'none';

        requestAnimationFrame(function () {
          stepBox1.style.opacity = '0';
          stepBox1.style.transform = 'translateY(-0.52vw)';
          stepBox1.style.pointerEvents = 'none';

          stepBox2.style.opacity = '1';
          stepBox2.style.transform = 'translateY(0)';
          stepBox2.style.pointerEvents = 'auto';
        });

        var done = false;
        var handler = function (e) {
          if (e.propertyName !== 'opacity' || done) return;
          done = true;
          stepBox1.style.display = 'none';
          stepBox1.removeEventListener('transitionend', handler);
        };
        stepBox1.addEventListener('transitionend', handler);

        // 0.5초 뒤 기술평가 진행 1차 애니 (step_box_02 s1 퍼센트 + 상품 가능성 + cen/텍스트/버튼)
        setTimeout(function () {
          startTechStepAnimations(stepBox2);
        }, 500);
      });
    }
  }

  // step_box_02 내부 s1의 "평가 진행하기" 버튼 → s2 노출 + 등급 슬라이더 + 상품 지원 가능성
  var stepBox2Inner = document.querySelector('.as_step_box.step_box_02');
  if (stepBox2Inner) {
    var innerBtn = stepBox2Inner.querySelector('.s1 .st_02_btn .btn');
    if (innerBtn) {
      innerBtn.addEventListener('click', function () {
        showTechDetailStep(stepBox2Inner);
      });
    }

    // s2 내부 step_02 / re_confirm 초기 숨김 세팅 (step_box_02 전용)
    var s2 = stepBox2Inner.querySelector('.as_card_detail_cont > .s2');
    if (s2) {
      var step2Re = s2.querySelector('.credit_rating_re.step_02');
      var re2 = s2.querySelector('.re_confirm');

      if (step2Re) {
        step2Re.style.opacity = '0';
        step2Re.style.transform = 'translateY(0)'; // 제자리
        step2Re.style.display = 'none';
        step2Re.style.pointerEvents = 'none';
        step2Re.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
      }
      if (re2) {
        // step_box_02 에서는 is-show 사용 안함, inline 스타일로만 제어
        re2.style.opacity = '0';
        re2.style.transform = 'translateY(0.52vw)';
        re2.style.display = 'none';
        re2.style.pointerEvents = 'none';
        re2.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
        re2.classList.remove('is-show');
      }
    }
  }
});

/* 기술평가(step_box_02) – 1차: 퍼센트, gp_bar, 영상/텍스트/버튼 전환 */
function startTechStepAnimations(stepBox) {
  if (!stepBox) return;

  // step_box_02가 속한 card_detail 기준으로 shiny_step 두 번째 별 on + 이미지 교체
  var card = stepBox.closest('.card_detail') || document;
  var secondStarLi = card.querySelector('.shiny_step ul li:nth-child(2)');
  if (secondStarLi) {
    secondStarLi.classList.add('on');
    var secondStarImg = secondStarLi.querySelector('img');
    if (secondStarImg) {
      secondStarImg.src = '../../resources/images/gate_02/ico_star_shi_on.png';
    }
  }

  var span      = stepBox.querySelector('.per_ing span');
  var perEl     = stepBox.querySelector('.per_ing');
  var descBlock = stepBox.querySelector('.as_card_detail_cont > div > .desc');
  var possiBox  = stepBox.querySelector('.s1 .credit_rating_possi');

  // 1) 퍼센트 0→100 (5초)
  if (span) {
    animatePercentOnSpan(span, 5000, function () {
      // 100% 도달 시 per_ing 위로 스르륵 사라짐
      if (perEl) {
        perEl.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
        requestAnimationFrame(function () {
          perEl.style.opacity = '0';
          perEl.style.transform = 'translateY(-0.52vw)';
        });
      }

      // desc / 상품 지원 가능성 간격 조정 (margin-top 애니)
      if (descBlock) { descBlock.style.marginTop = '-2.5vw'; }
      if (possiBox) { possiBox.style.marginTop = '3.8698vw'; }

      // cen_01 ↔ cen_02 / desc_01 ↔ desc_02 / 버튼 노출
      switchTechVisuals(stepBox);
    });
  }

  // 2) 상품 지원 가능성 바/숫자 (예: 금융 60, 비금융 35)
  var bars    = stepBox.querySelectorAll('.s1 .credit_rating_possi .gp_bar');
  var pers    = stepBox.querySelectorAll('.s1 .credit_rating_possi .per span');
  var targets = [20, 20];
  var duration = 5000;

  bars.forEach(function (bar, idx) {
    var target = targets[idx] != null ? targets[idx] : 0;
    animateValue(0, target, duration, function (v) {
      var val = Math.round(v * 10) / 10;
      bar.style.width = val + '%';
    });
  });

  pers.forEach(function (el, idx) {
    var target = targets[idx] != null ? targets[idx] : 0;
    animateValue(0, target, duration, function (v) {
      var iv = Math.round(v);
      el.textContent = iv;
    });
  });
}

/* 퍼센트 100% 도달 후 비주얼 교체 (step_box_02 s1) */
function switchTechVisuals(stepBox) {
  var cen1 = stepBox.querySelector('.prog_mp_item .cen_01');
  var cen2 = stepBox.querySelector('.prog_mp_item .cen_02');
  var desc1 = stepBox.querySelector('.desc .desc_01');
  var desc2 = stepBox.querySelector('.desc .desc_02');
  var btnWrap = stepBox.querySelector('.st_02_btn');

  if (cen1 && cen2) {
    cen2.style.display = 'block';
    cen2.style.opacity = '0';
    cen2.style.transform = 'translate(-50%,-40%)';

    requestAnimationFrame(function () {
      cen1.style.opacity = '0';
      cen1.style.transform = 'translate(-50%,-60%)';
      cen2.style.opacity = '1';
      cen2.style.transform = 'translate(-50%,-50%)';
    });

    var vHandler = function (e) {
      if (e.propertyName !== 'opacity') return;
      cen1.style.display = 'none';
      cen1.removeEventListener('transitionend', vHandler);
    };
    cen1.addEventListener('transitionend', vHandler);
  }

  if (desc1 && desc2) {
    var dHandler = function (e) {
      if (e.propertyName !== 'opacity') return;
      desc1.style.display = 'none';
      desc1.removeEventListener('transitionend', dHandler);

      desc2.style.display = 'inline-block';
      desc2.style.opacity = '0';
      requestAnimationFrame(function () {
        desc2.style.opacity = '1';
      });
    };
    desc1.addEventListener('transitionend', dHandler);
    requestAnimationFrame(function () {
      desc1.style.opacity = '0';
    });
  }

  if (btnWrap) {
    requestAnimationFrame(function () {
      btnWrap.style.opacity = '1';
      btnWrap.style.transform = 'translateY(0)';
      btnWrap.style.pointerEvents = 'auto';
      btnWrap.style.display = 'block';
    });
  }
}

/* -----------------------------
   step_box_02 내부 s1 → s2 상세 단계
------------------------------*/

// s1의 "평가 진행하기" 버튼 클릭 시: s1 위로 사라지고 s2 노출 + 등급 슬라이더 + 상품 지원 가능성
function showTechDetailStep(stepBox) {
  if (!stepBox) return;
  if (stepBox.dataset.techDetailDone === '1') return; // 중복 실행 방지
  stepBox.dataset.techDetailDone = '1';

  var s1 = stepBox.querySelector('.as_card_detail_cont > .s1');
  var s2 = stepBox.querySelector('.as_card_detail_cont > .s2');
  if (!s2) return;

  // s1 위로 스르륵 사라짐
  if (s1) {
    s1.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
    requestAnimationFrame(function () {
      s1.style.opacity = '0';
      s1.style.transform = 'translateY(-0.52vw)';
      s1.style.pointerEvents = 'none';
    });

    var s1Done = false;
    var s1Handler = function (e) {
      if (e.propertyName !== 'opacity' || s1Done) return;
      s1Done = true;
      s1.style.display = 'none';
      s1.removeEventListener('transitionend', s1Handler);
    };
    s1.addEventListener('transitionend', s1Handler);
  }

  // s2 아래에서 위로 등장
  s2.style.display = 'block';
  s2.style.opacity = '0';
  s2.style.transform = 'translateY(0.52vw)';
  s2.style.transition = 'opacity 0.8s ease,transform 0.8s ease';

  requestAnimationFrame(function () {
    s2.style.opacity = '1';
    s2.style.transform = 'translateY(0)';
  });

  // s2 등급 슬라이더(step_01) 초기화
  var tracks = s2.querySelectorAll('.credit_rating_re.step_01 .grade_slider .grade_track');
  tracks.forEach(function (track) {
    var fill = track.querySelector('.grade_fill');
    var thumb = track.querySelector('.grade_thumb');
    if (fill) fill.style.width = '0%';
    if (thumb) thumb.style.left = '0%';
  });

  // s2 상품 지원 가능성 초기화
  var possi2Bars = s2.querySelectorAll('.credit_rating_possi .gp_bar');
  var possi2Per  = s2.querySelectorAll('.credit_rating_possi .per span');
  possi2Bars.forEach(function (bar) { bar.style.width = '0%'; });
  possi2Per.forEach(function (el) { el.textContent = '0'; });

  // 등급 슬라이더 애니 → 끝나고 0.5초 뒤 상품 지원 가능성 애니
  animateTechGradeSliders(s2, function () {
    setTimeout(function () {
      animateTechPossiFromS2(s2);
    }, 500);
  });
}

// s2 등급 슬라이더(step_01): 70,60,80,70,50% 순으로 0.2초 간격으로 채우기
function animateTechGradeSliders(container, onComplete) {
  var tracks = container.querySelectorAll('.credit_rating_re.step_01 .grade_slider .grade_track');
  if (!tracks.length) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var targets = [70, 60, 80, 70, 50];
  var baseDuration = 1200; // 각 슬라이더 애니 시간
  var delayGap = 200;      // 슬라이더 사이 시작 딜레이 (0.2초)

  tracks.forEach(function (track, idx) {
    var fill = track.querySelector('.grade_fill');
    var thumb = track.querySelector('.grade_thumb');
    var target = targets[idx] != null ? targets[idx] : targets[targets.length - 1];

    setTimeout(function () {
      animateValue(0, target, baseDuration, function (v) {
        var val = Math.round(v * 10) / 10;
        if (fill) fill.style.width = val + '%';
        if (thumb) thumb.style.left = val + '%';
      }, function () {
        if (idx === tracks.length - 1 && typeof onComplete === 'function') {
          onComplete();
        }
      });
    }, idx * delayGap);
  });
}

// step_box_02 의 s2 안에서 상품 지원 가능성 바 + 숫자 애니
// 애니메이션이 모두 끝난 후 .s2.on 추가
function animateTechPossiFromS2(s2) {
  if (!s2) return;

  var bars    = s2.querySelectorAll('.credit_rating_possi .gp_bar');
  var pers    = s2.querySelectorAll('.credit_rating_possi .per span');
  var targets = [30, 30]; // 금융 / 비금융
  var duration = 2000;

  // 막대 채우기
  bars.forEach(function (bar, idx) {
    var target = targets[idx] != null ? targets[idx] : 0;
    animateValue(0, target, duration, function (v) {
      var val = Math.round(v * 10) / 10;
      bar.style.width = val + '%';
    });
  });

  // 숫자 카운트 (여기 완료 시점 기준으로 s2.on 적용)
  var doneCount = 0;
  var totalPer = pers.length;

  pers.forEach(function (span, idx) {
    var target = targets[idx] != null ? targets[idx] : 0;
    animateValue(0, target, duration, function (v) {
      span.textContent = Math.round(v);
    }, function () {
      doneCount++;
      if (doneCount === totalPer) {
        // ★ 모든 per 애니 끝난 시점 → .s2.on 적용
        s2.classList.add('on');
      }
    });
  });
}

/* -----------------------------
   2차 단계: s2.on 상태에서 "결과받기" → step_02 + re_confirm 노출
------------------------------*/

// 이벤트 위임으로 결과 버튼 처리 (step_box_02 안)
document.addEventListener('click', function (e) {
  var btn = e.target.closest('.as_step_box.step_box_02 .btn_result_report .btn_report');
  if (!btn) return;

  var s2 = btn.closest('.s2');
  if (!s2) return;

  // s2.on 상태일 때만 작동
  if (!s2.classList.contains('on')) return;

  showStep02AndConfirm(s2);
});

function showStep02AndConfirm(s2) {
  if (!s2) return;
  if (s2.dataset.step02Done === '1') return; // 중복실행 방지
  s2.dataset.step02Done = '1';

  var step1Re = s2.querySelector('.credit_rating_re.step_01');
  var step2Re = s2.querySelector('.credit_rating_re.step_02');
  var possi   = s2.querySelector('.credit_rating_possi');
  var re2     = s2.querySelector('.re_confirm');

  // step_01 + 상품 지원 가능성 위로 사라짐
  if (step1Re) {
    step1Re.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
    requestAnimationFrame(function () {
      step1Re.style.opacity = '0';
      step1Re.style.transform = 'translateY(-0.52vw)';
      step1Re.style.pointerEvents = 'none';
    });
    step1Re.addEventListener('transitionend', function h1(e) {
      if (e.target !== step1Re || e.propertyName !== 'opacity') return;
      step1Re.removeEventListener('transitionend', h1);
      step1Re.style.display = 'none';

      // ★ step_01 완전히 사라지고 0.2초 뒤에 step_02 노출 애니 시작
      setTimeout(function () {
        startStep02Block();
      }, 200);
    });
  } else {
    // step_01이 없으면 바로 step_02 쪽으로
    startStep02Block();
  }

  if (possi) {
    possi.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
    requestAnimationFrame(function () {
      possi.style.opacity = '0';
      possi.style.transform = 'translateY(-0.52vw)';
      possi.style.pointerEvents = 'none';
    });
    possi.addEventListener('transitionend', function h2(e) {
      if (e.target !== possi || e.propertyName !== 'opacity') return;
      possi.removeEventListener('transitionend', h2);
      possi.style.display = 'none';
    });
  }

  // step_02 노출 + 슬라이더 채우기 + re_confirm 순차 실행
  function startStep02Block() {
    if (!step2Re) {
      // step_02가 없으면 re_confirm만
      if (re2) showReConfirmFromStep2(re2);
      return;
    }

    // step_02 제자리에서 페이드 인 준비
    step2Re.style.display = 'block';
    step2Re.style.opacity = '0';
    step2Re.style.transform = 'translateY(0)'; // 이동 없음
    step2Re.style.pointerEvents = 'none';
    step2Re.style.transition = 'opacity 0.8s ease';

    // step_02의 grade_slider 기본 표시
    var step2Slider = step2Re.querySelector('.grade_slider');
    if (step2Slider) {
      step2Slider.style.opacity = '1';
      step2Slider.style.display = 'inline-block';
    }

    // ★ 컨테이너 opacity 트랜지션 끝난 뒤 슬라이더 애니 시작
    var fired = false;
    function step2Handler(e) {
      if (e.target !== step2Re || e.propertyName !== 'opacity') return;
      if (fired) return;
      fired = true;
      step2Re.removeEventListener('transitionend', step2Handler);

      animateStep02Grade(step2Re, function () {
        if (re2) showReConfirmFromStep2(re2);
      });
    }
    step2Re.addEventListener('transitionend', step2Handler);

    // opacity 변경 트리거
    requestAnimationFrame(function () {
      step2Re.style.opacity = '1';
      step2Re.style.pointerEvents = 'auto';
    });
  }
}

/* -----------------------------
   step_box_02 : 결과받기 버튼 → step_02 + re_confirm
------------------------------*/

// 공용: transitionend + fallback 한 번만 호출
function addOnceTransitionEnd(el, propName, cb, fallbackDelay) {
  if (!el) {
    if (typeof cb === 'function') cb();
    return;
  }

  var called = false;

  function done() {
    if (called) return;
    called = true;
    el.removeEventListener('transitionend', handler);
    if (typeof cb === 'function') cb();
  }

  function handler(e) {
    if (e.target !== el) return;
    if (propName && e.propertyName !== propName) return;
    done();
  }

  el.addEventListener('transitionend', handler);

  // 혹시 transitionend가 안 오는 경우 대비 fallback
  if (fallbackDelay && fallbackDelay > 0) {
    setTimeout(done, fallbackDelay);
  }
}

// 이벤트 위임으로 결과 버튼 처리 (step_box_02 안)
document.addEventListener('click', function (e) {
  var btn = e.target.closest('.as_step_box.step_box_02 .btn_result_report .btn_report');
  if (!btn) return;

  var s2 = btn.closest('.s2');
  if (!s2) return;

  // s2.on 상태일 때만 작동
  if (!s2.classList.contains('on')) return;

  showStep02AndConfirm(s2);
});

function showStep02AndConfirm(s2) {
  if (!s2) return;
  if (s2.dataset.step02Done === '1') return; // 중복실행 방지
  s2.dataset.step02Done = '1';

  var step1Re = s2.querySelector('.credit_rating_re.step_01');
  var step2Re = s2.querySelector('.credit_rating_re.step_02');
  var possi   = s2.querySelector('.credit_rating_possi');
  var re2     = s2.querySelector('.re_confirm');

  // -----------------------------
  // 1) step_01 + 상품 지원 가능성 위로 사라짐
  // -----------------------------
  if (step1Re) {
    step1Re.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
    requestAnimationFrame(function () {
      step1Re.style.opacity = '0';
      step1Re.style.transform = 'translateY(-0.52vw)';
      step1Re.style.pointerEvents = 'none';
    });

    // opacity 트랜지션 종료 + fallback(1초) 후 호출
    addOnceTransitionEnd(step1Re, 'opacity', function () {
      step1Re.style.display = 'none';
      // ★ step_01 완전히 사라지고 0.2초 뒤에 step_02 노출 시도
      setTimeout(startStep02Block, 200);
    }, 1000);
  } else {
    // step_01이 없으면 바로 0.2초 뒤에 step_02 쪽으로
    setTimeout(startStep02Block, 200);
  }

  if (possi) {
    possi.style.transition = 'opacity 0.8s ease,transform 0.8s ease';
    requestAnimationFrame(function () {
      possi.style.opacity = '0';
      possi.style.transform = 'translateY(-0.52vw)';
      possi.style.pointerEvents = 'none';
    });

    addOnceTransitionEnd(possi, 'opacity', function () {
      possi.style.display = 'none';
    }, 1000);
  }

  // -----------------------------
  // 2) step_02 노출 + 슬라이더 채우기 + re_confirm 순차 실행
  // -----------------------------
  function startStep02Block() {
    if (!step2Re) {
      // step_02가 없으면 re_confirm만
      if (re2) showReConfirmFromStep2(re2);
      return;
    }

    // 이미 opacity 1 상태일 수도 있으니까 초기값 강제로 세팅
    step2Re.style.display = 'block';
    step2Re.style.opacity = '0';
    step2Re.style.transform = 'translateY(0)'; // 제자리
    step2Re.style.pointerEvents = 'none';
    step2Re.style.transition = 'opacity 0.8s ease';

    // step_02의 grade_slider 기본 표시
    var step2Slider = step2Re.querySelector('.grade_slider');
    if (step2Slider) {
      step2Slider.style.opacity = '1';
      step2Slider.style.display = 'inline-block';
    }

    // 컨테이너 opacity 트랜지션 끝난 뒤 슬라이더 애니 시작
    addOnceTransitionEnd(step2Re, 'opacity', function () {
      animateStep02Grade(step2Re, function () {
        if (re2) showReConfirmFromStep2(re2);
      });
    }, 1000);

    // opacity 변경 트리거
    requestAnimationFrame(function () {
      step2Re.style.opacity = '1';
      step2Re.style.pointerEvents = 'auto';
    });
  }
}

/* step_02 슬라이더 내부 grade_fill / grade_thumb 애니 (0 → target%) */
function animateStep02Grade(step2Re, onComplete) {
  if (!step2Re) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var track = step2Re.querySelector('.grade_slider .grade_track');
  if (!track) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var fill  = track.querySelector('.grade_fill');
  var thumb = track.querySelector('.grade_thumb');

  if (fill)  fill.style.width = '0%';
  if (thumb) thumb.style.left = '0%';

  var target   = 70;   // 필요하면 이 값만 수정
  var duration = 1000;

  animateValue(0, target, duration, function (v) {
    var val = Math.round(v * 10) / 10;
    if (fill)  fill.style.width = val + '%';
    if (thumb) thumb.style.left = val + '%';
  }, function () {
    // 슬라이더 애니 끝난 뒤 grade_slider_info on
    var info2 = step2Re.querySelector('.grade_slider_info');
    if (info2) info2.classList.add('is-show');

    if (typeof onComplete === 'function') onComplete();
  });
}

/* step_box_02의 re_confirm를 부드럽게 노출 */
function showReConfirmFromStep2(re2) {
  if (!re2) return;

  re2.style.display = 'block';
  re2.style.opacity = '0';
  re2.style.transform = 'translateY(0.52vw)';
  re2.style.pointerEvents = 'none';

  requestAnimationFrame(function () {
    re2.style.opacity = '1';
    re2.style.transform = 'translateY(0)';
    re2.style.pointerEvents = 'auto';
  });
}











document.addEventListener('DOMContentLoaded', function () {
  document.querySelectorAll('.ga_item.js-ga').forEach(initGauge);
});

function initGauge(root) {
  var arc = root.querySelector('.ga_arc');
  if (!arc) return;

  var TOTAL_TICKS = 20;         // 막대 개수 (스크린샷 느낌 값)
  var START_ANGLE = -90;       // 시작 각도
  var END_ANGLE   = 90;        // 끝 각도
  var STEP = (END_ANGLE - START_ANGLE) / (TOTAL_TICKS - 1);

  // 막대 생성
  for (var i = 0; i < TOTAL_TICKS; i++) {
    var tick = document.createElement('span');
    tick.className = 'ga_tick';
    tick.style.setProperty('--rot', (START_ANGLE + STEP * i) + 'deg');
    arc.appendChild(tick);
  }

  var ticks = arc.querySelectorAll('.ga_tick');

  // 마지막 2개를 제외한 막대만 애니메이션
  var lastActiveIndex = ticks.length - 3; // 마지막에서 3개째까지
  var totalAnimTime = 1000;               // 전체 1초
  var delayPer = totalAnimTime / lastActiveIndex; // 막대당 딜레이

  ticks.forEach(function (tick, idx) {
    if (idx > lastActiveIndex) return; // 마지막 2개는 회색 유지

    tick.classList.add('is-anim');
    tick.style.setProperty('--delay', (idx * delayPer / 1000) + 's');
  });
}


/* =============================
   tec02 : 기술신용평가서 팝업 시퀀스
   ============================= */

// tec02 열릴 때 전체 흐름 시작
function startTec02Sequence(pop) {
  if (!pop) return;

  // 이전에 돌던 타이머 있으면 정리
  if (pop._tec02Timers) {
    pop._tec02Timers.forEach(clearTimeout);
  }
  pop._tec02Timers = [];

  // 상태 초기화
  resetTec02State(pop);

  // 상단 inner(로딩 영역)는 보이게 초기화
  var header = pop.querySelector('.inner'); // tec_02 바로 아래 inner
  if (header) {
    header.style.display = 'block';
    header.style.opacity = '1';
    header.style.transform = 'translateY(0)';
    header.style.pointerEvents = 'auto';
  }

  // 5초 동안 상단 로딩 화면만 보이게 두고,
  // 5초 뒤 inner를 위로 사라지게 한 다음 0.2초 뒤 form 등장
  var t1 = setTimeout(function () {
    fadeOutTec02Header(pop);
  }, 5000);
  pop._tec02Timers.push(t1);
}

// tec02 상단 inner 사라지기 (위로 + 투명)
function fadeOutTec02Header(pop) {
  var header = pop.querySelector('.inner');
  if (!header) {
    // 예외적으로 없으면 그냥 form 바로 노출
    showTec02Form(pop);
    return;
  }

  header.style.transition = 'opacity 0.8s ease, transform 0.8s ease';

  requestAnimationFrame(function () {
    header.style.opacity = '0';
    header.style.transform = 'translateY(-0.52vw)';
    header.style.pointerEvents = 'none';
  });

  var done = false;
  var onEnd = function (e) {
    if (e.propertyName !== 'opacity' || done) return;
    done = true;
    header.removeEventListener('transitionend', onEnd);
    header.style.display = 'none';

    // 완전히 사라지고 0.2초 뒤 form 노출
    var t = setTimeout(function () {
      showTec02Form(pop);
    }, 200);
    if (!pop._tec02Timers) pop._tec02Timers = [];
    pop._tec02Timers.push(t);
  };
  header.addEventListener('transitionend', onEnd);
}

// tec02 내부 요소 초기화
function resetTec02State(pop) {
  var form = pop.querySelector('.tec_credit_form');
  if (form) {
    form.style.display = 'none';
    form.style.opacity = '0';
    form.style.transform = 'translateY(0.52vw)';
    form.style.pointerEvents = 'auto';
  }

  // 반원 게이지 막대 초기화
  var arcWrap = pop.querySelector('.ga_item.js-ga .ga_arc');
  if (arcWrap) {
    arcWrap.innerHTML = '';
  }

  // 위쪽 2개의 슬라이더 초기화
  var creditBlocks = pop.querySelectorAll('.gp .credit_rating_re');
  creditBlocks.forEach(function (block) {
    var track = block.querySelector('.grade_track');
    if (!track) return;
    var fill = track.querySelector('.grade_fill');
    var thumb = track.querySelector('.grade_thumb');
    if (fill) fill.style.width = '0%';
    if (thumb) thumb.style.left = '0%';
  });

  // 상품 지원 가능성 영역 초기화
  var possi = pop.querySelector('.possi_item .credit_rating_possi');
  if (possi) {
    possi.style.display = 'none';
    possi.style.opacity = '0';
    possi.style.transform = 'translateY(0.52vw)';
    possi.style.pointerEvents = 'none';

    var bars  = possi.querySelectorAll('.gp_bar');
    var spans = possi.querySelectorAll('.per span');
    bars.forEach(function (b) { b.style.width = '0%'; });
    spans.forEach(function (s) { s.textContent = '0'; });
  }

  // 하단 re_confirm 초기화
  var reConfirm = pop.querySelector('.confirm_item .re_confirm');
  if (reConfirm) {
    reConfirm.style.display = 'none';
    reConfirm.style.opacity = '0';
    reConfirm.style.transform = 'translateY(0.52vw)';
    reConfirm.style.pointerEvents = 'none';
  }
}

// inner 사라진 뒤 tec_credit_form 위로 스르륵 등장
function showTec02Form(pop) {
  var form = pop.querySelector('.tec_credit_form');
  if (!form) return;

  form.style.display = 'block';
  // form.style.pointerEvents = 'none';  // ← 이 줄은 지우거나

  requestAnimationFrame(function () {
    form.style.opacity = '1';
    form.style.transform = 'translateY(0)';
    form.style.pointerEvents = 'auto';  // ★ 이렇게 바로 활성화
  });

  var t2 = setTimeout(function () {
    startTec02Gauge(pop);
  }, 500);
  pop._tec02Timers.push(t2);
}

/* -----------------------------
   1) 반원 게이지(ga_item) 애니
------------------------------*/
function startTec02Gauge(pop) {
  var ga  = pop.querySelector('.ga_item.js-ga');
  if (!ga) return;
  var arc = ga.querySelector('.ga_arc');
  if (!arc) return;

  arc.innerHTML = '';

  var count = 20;          // 막대 개수
  var start = -90;         // 시작 각도
  var end   = 90;          // 끝 각도
  var step  = (end - start) / (count - 1);

  for (var i = 0; i < count; i++) {
    var tick = document.createElement('div');
    tick.className = 'ga_tick';

    var angle = start + step * i;
    tick.style.setProperty('--rot', angle + 'deg');

    // 마지막 2개는 항상 회색으로 남겨두고,
    // 그 전까지는 순차적으로 파란 그라데이션 채움
    if (i <= count - 3) {
      var delay = (i * 0.03).toFixed(2) + 's'; // 전체 1초 정도
      tick.style.setProperty('--delay', delay);
      tick.classList.add('is-anim');
    }

    arc.appendChild(tick);
  }

  // 게이지 시작 0.5초 뒤 → 슬라이더 애니 시작
  var t3 = setTimeout(function () {
    animateTec02Sliders(pop);
  }, 500);
  pop._tec02Timers.push(t3);
}

/* -----------------------------
   2) 위쪽 2개 슬라이더 채우기
------------------------------*/
function animateTec02Sliders(pop) {
  var form   = pop.querySelector('.tec_credit_form');
  if (!form) return;

  var blocks = form.querySelectorAll('.gp .credit_rating_re');
  if (!blocks.length) return;

  var first  = blocks[0];
  var second = blocks[1];

  // 첫 번째 : 80%
  animateSingleGrade(first, 80, 1200, function () {
    // 0.2초 뒤 두 번째 : 75%
    var t4 = setTimeout(function () {
      animateSingleGrade(second, 75, 1200, function () {
        // 두 번째까지 끝나면 상품 지원 가능성 영역 노출
        showTec02Possi(pop);
      });
    }, 200);
    pop._tec02Timers.push(t4);
  });
}

// 공통 슬라이더 채우기
function animateSingleGrade(block, target, duration, onComplete) {
  if (!block) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var track = block.querySelector('.grade_track');
  if (!track) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var fill  = track.querySelector('.grade_fill');
  var thumb = track.querySelector('.grade_thumb');

  if (fill)  fill.style.width = '0%';
  if (thumb) thumb.style.left = '0%';

  animateValue(0, target, duration, function (v) {
    var val = Math.round(v * 10) / 10;
    if (fill)  fill.style.width = val + '%';
    if (thumb) thumb.style.left = val + '%';
  }, onComplete);
}

/* -----------------------------
   3) 상품 지원 가능성 + 게이지
------------------------------*/
function showTec02Possi(pop) {
  var possi = pop.querySelector('.possi_item .credit_rating_possi');
  if (!possi) return;

  possi.style.display = 'block';
  possi.style.pointerEvents = 'none';

  requestAnimationFrame(function () {
    possi.style.opacity = '1';
    possi.style.transform = 'translateY(0)';
  });

  // 0.2초 뒤 내부 막대 채우기 시작
  var t5 = setTimeout(function () {
    animateTec02PossiBars(pop);
  }, 200);
  pop._tec02Timers.push(t5);
}

function animateTec02PossiBars(pop) {
  var possi = pop.querySelector('.possi_item .credit_rating_possi');
  if (!possi) return;

  var bars  = possi.querySelectorAll('.gp_bar');
  var spans = possi.querySelectorAll('.per span');
  var targets  = [40, 40];      // 금융 / 비금융
  var duration = 1500;

  // 막대 채우기 (두 번째는 0.2초 늦게 시작)
  bars.forEach(function (bar, idx) {
    var target = targets[idx] != null ? targets[idx] : 0;
    var delay  = (idx === 1 ? 200 : 0);

    setTimeout(function () {
      animateValue(0, target, duration, function (v) {
        var val = Math.round(v * 10) / 10;
        bar.style.width = val + '%';
      });
    }, delay);
  });

  // 숫자 카운트
  spans.forEach(function (span, idx) {
    var target = targets[idx] != null ? targets[idx] : 0;
    var delay  = (idx === 1 ? 200 : 0);

    setTimeout(function () {
      animateValue(0, target, duration, function (v) {
        span.textContent = Math.round(v);
      });
    }, delay);
  });

  // 모든 게이지가 다 찬 뒤 re_confirm 도 위로 스르륵 노출 + 스크롤 맨 아래
  var reConfirm = pop.querySelector('.confirm_item .re_confirm');
  var form      = pop.querySelector('.tec_credit_form');

  if (reConfirm) {
    var totalTime = 200 + duration + 200; // 시작 딜레이 + 애니 + 여유
    var t6 = setTimeout(function () {
      reConfirm.style.display = 'block';
      reConfirm.style.pointerEvents = 'none';

      requestAnimationFrame(function () {
        reConfirm.style.opacity = '1';
        reConfirm.style.transform = 'translateY(0)';
        reConfirm.style.pointerEvents = 'auto';

        // ★ credit_rating_possi와 re_confirm 노출 시점에
        //   tec_credit_form 스크롤을 맨 아래로 이동
        if (form) {
          if (typeof form.scrollTo === 'function') {
            form.scrollTo({ top: form.scrollHeight, behavior: 'smooth' });
          } else {
            form.scrollTop = form.scrollHeight;
          }
        }
      });
    }, totalTime);
    if (!pop._tec02Timers) pop._tec02Timers = [];
    pop._tec02Timers.push(t6);
  }
}




/* ============================
   STEP 3 : 미래 성장성 평가 시퀀스
   ============================ */

/* tec02 팝업 안의 btn 클릭 → step_box_02 → step_box_03 전환 + step3 애니 시작 */
document.addEventListener('click', function (e) {
  // #tec02 팝업 안의 btn_box > .btn
  var btn = e.target.closest('#tec02.as_expec_pop.tec_02 .btn_box .btn');
  if (!btn) return;

  var pop = document.getElementById('tec02');
  if (pop) {
    pop.classList.remove('is-show');
  }

  var stepBox2 = document.querySelector('.as_step_box.step_box_02');
  var stepBox3 = document.querySelector('.as_step_box.step_box_03');
  if (!stepBox3) return;

  // step 3 상태 초기화
  resetStepBox03State(stepBox3);

  // step3 기본 상태
  stepBox3.style.display = 'block';
  stepBox3.style.opacity = '0';
  stepBox3.style.transform = 'translateY(0.52vw)';
  stepBox3.style.pointerEvents = 'none';
  stepBox3.style.transition = 'opacity 0.8s cubic-bezier(0.22,1,0.36,1),transform 0.8s cubic-bezier(0.22,1,0.36,1)';

  if (stepBox2) {
    stepBox2.style.transition = 'opacity 0.8s cubic-bezier(0.22,1,0.36,1),transform 0.8s cubic-bezier(0.22,1,0.36,1)';

    requestAnimationFrame(function () {
      // step2 위로 사라짐
      stepBox2.style.opacity = '0';
      stepBox2.style.transform = 'translateY(-0.52vw)';
      stepBox2.style.pointerEvents = 'none';

      // step3 위로 등장
      stepBox3.style.opacity = '1';
      stepBox3.style.transform = 'translateY(0)';
      stepBox3.style.pointerEvents = 'auto';
    });

    // step2 애니 끝나면 display:none
    addOnceTransitionEnd(stepBox2, 'opacity', function () {
      stepBox2.style.display = 'none';
    }, 1000);
  } else {
    // step2가 없으면 step3만 등장
    requestAnimationFrame(function () {
      stepBox3.style.opacity = '1';
      stepBox3.style.transform = 'translateY(0)';
      stepBox3.style.pointerEvents = 'auto';
    });
  }

  // step3가 완전히 보인 뒤 시퀀스 시작 + 점 상태 갱신
  addOnceTransitionEnd(stepBox3, 'opacity', function () {
    // ★ 미래 성장성 평가 시작 시 dot_cs 내 3번째 li에 on 추가
    var dot3 = document.querySelector('.shiny_step.dot_cs ul li:nth-child(3)');
    if (dot3) dot3.classList.add('on');

    startStepBox03Sequence(stepBox3);
  }, 1200);
});

/* ----------------------------
   상태 초기화
---------------------------- */
function resetStepBox03State(box) {
  var s1 = box.querySelector('.s1');

  // s1의 5개 슬라이더 초기화
  if (s1) {
    var miniTracks = s1.querySelectorAll('.grade_slider > ul > li .grade_track');
    miniTracks.forEach(function (track) {
      var fill = track.querySelector('.grade_fill');
      var thumb = track.querySelector('.grade_thumb');
      if (fill) fill.style.width = '0%';
      if (thumb) thumb.style.left = '0%';
    });

    // s1의 대표 3요소(로딩 비주얼, 텍스트, 5개 슬라이더)는 보이도록
    var prog = s1.querySelector('.prog_ico');
    var desc = s1.querySelector('.desc.s1_1');

    var miniSlider = null;
    s1.querySelectorAll('.grade_slider').forEach(function (el) {
      if (el.parentElement === s1) miniSlider = el;
    });

    [prog, desc, miniSlider].forEach(function (el) {
      if (!el) return;
      el.style.display = '';
      el.style.opacity = '1';
      el.style.transform = 'translateY(0)';
      el.style.pointerEvents = 'auto';
    });
  }

  // 상단 credit_rating_re 초기화
  var mainRe = box.querySelector('.credit_rating_re');
  if (mainRe) {
    mainRe.style.display = 'none';
    mainRe.style.opacity = '0';
    mainRe.style.transform = 'translateY(0.52vw)';
    mainRe.style.pointerEvents = 'none';

    var mainFill = mainRe.querySelector('.grade_track .grade_fill');
    var mainThumb = mainRe.querySelector('.grade_track .grade_thumb');
    if (mainFill) mainFill.style.width = '0%';
    if (mainThumb) mainThumb.style.left = '0%';

    var info = mainRe.querySelector('.grade_slider_info');
    if (info) info.classList.remove('is-show');
  }

  // 상품 지원 가능성 초기화
  var possi = box.querySelector('.credit_rating_possi');
  if (possi) {
    possi.style.display = 'none';
    possi.style.opacity = '0';
    possi.style.transform = 'translateY(0.52vw)';
    possi.style.pointerEvents = 'none';

    var bars = possi.querySelectorAll('.gp_bar');
    var spans = possi.querySelectorAll('.per span');
    bars.forEach(function (b) { b.style.width = '0%'; });
    spans.forEach(function (s) { s.textContent = '0'; });
  }

  // re_confirm 초기화
  var reConfirm = box.querySelector('.re_confirm');
  if (reConfirm) {
    reConfirm.style.display = 'none';
    reConfirm.style.opacity = '0';
    reConfirm.style.transform = 'translateY(0.52vw)';
    reConfirm.style.pointerEvents = 'none';
  }
}

/* ======================================
 * STEP 3 : 미래 성장성 평가 시퀀스
 * (as_step_box step_box_03 전용)
 * ====================================== */

/* 공용 숫자 애니메이션 (ease-out) */
function animateValueStep03(from, to, duration, onUpdate, onComplete) {
  var start = null;
  function step(timestamp) {
    if (!start) start = timestamp;
    var progress = timestamp - start;
    var t = Math.min(1, progress / duration);

    // ease-out (처음 빠르게, 나중 천천히)
    var eased = 1 - Math.pow(1 - t, 3); // easeOutCubic

    var value = from + (to - from) * eased;
    if (typeof onUpdate === 'function') onUpdate(value);
    if (t < 1) {
      requestAnimationFrame(step);
    } else {
      if (typeof onComplete === 'function') onComplete();
    }
  }
  requestAnimationFrame(step);
}

/* transitionend 한 번만 받는 헬퍼 (step03 전용) */
function onTransitionEndOnceStep03(el, handler, timeout) {
  if (!el) return;
  var called = false;
  function done(e) {
    if (called) return;
    if (e && e.target !== el) return;
    if (e && e.propertyName !== 'opacity' && e.propertyName !== 'transform') return;
    called = true;
    el.removeEventListener('transitionend', done);
    if (typeof handler === 'function') handler();
  }
  el.addEventListener('transitionend', done);
  if (timeout) {
    setTimeout(done, timeout);
  }
}

/* 외부에서 이 함수만 호출하면 됨
   예) const box3 = document.querySelector('.as_step_box.step_box_03');
       startStepBox03Sequence(box3);
*/
function startStepBox03Sequence(stepBox3) {
  if (!stepBox3) return;

  resetStepBox03(stepBox3);

  // 여기까지 오면 step_box_03는 이미 화면에 등장한 상태라고 가정
  // 1단계: s1 안의 5개 슬라이더(80,85,75,85,80) 순차 채우기
  var s1 = stepBox3.querySelector('.s1');
  if (!s1) return;

  animateStep03SmallSliders(s1, function () {
    // 2단계: 0.5초 대기 후 prog_ico / desc.s1_1 / s1의 grade_slider 위로 사라짐
    setTimeout(function () {
      hideStep03FirstGroup(stepBox3, function () {
        // 3단계: credit_rating_re 등장 → 75% 채우고 info 등장
        showStep03MainSlider(stepBox3, function () {
          // 4단계: credit_rating_possi 등장 → 85%, 90% 채우고
          showStep03Posi(stepBox3, function () {
            // 5단계: re_confirm 등장
            showStep03Confirm(stepBox3);
          });
        });
      });
    }, 500);
  });
}

/* 초기 상태 리셋 */
function resetStepBox03(stepBox3) {
  var s1 = stepBox3.querySelector('.s1');
  if (s1) {
    // s1의 5개 미니 슬라이더 0%로
    var miniSlider = null;
    s1.querySelectorAll('.grade_slider').forEach(function (el) {
      if (el.parentElement === s1) miniSlider = el; // s1 바로 아래 grade_slider
    });

    if (miniSlider) {
      var tracks = miniSlider.querySelectorAll('.grade_track');
      tracks.forEach(function (track) {
        var fill = track.querySelector('.grade_fill');
        var thumb = track.querySelector('.grade_thumb');
        if (fill) fill.style.width = '0%';
        if (thumb) thumb.style.left = '0%';
      });
    }

    // s1 상단 3요소는 보이도록 초기화
    var prog = s1.querySelector('.prog_ico');
    var desc = s1.querySelector('.desc.s1_1');

    [prog, desc, miniSlider].forEach(function (el) {
      if (!el) return;
      el.style.display = '';
      el.style.opacity = '1';
      el.style.transform = 'translateY(0)';
      el.style.pointerEvents = 'auto';
      el.style.transition =
        'opacity 0.8s cubic-bezier(0.22,1,0.36,1), transform 0.8s cubic-bezier(0.22,1,0.36,1)';
    });
  }

  // 상단 등급 슬라이더(credit_rating_re)
  var mainRe = stepBox3.querySelector('.credit_rating_re');
  if (mainRe) {
    mainRe.style.display = 'none';
    mainRe.style.opacity = '0';
    mainRe.style.transform = 'translateY(0.52vw)';
    mainRe.style.pointerEvents = 'none';
    mainRe.style.transition =
      'opacity 0.8s cubic-bezier(0.22,1,0.36,1), transform 0.8s cubic-bezier(0.22,1,0.36,1)';

    var track = mainRe.querySelector('.grade_track');
    if (track) {
      var fill = track.querySelector('.grade_fill');
      var thumb = track.querySelector('.grade_thumb');
      if (fill) fill.style.width = '0%';
      if (thumb) thumb.style.left = '0%';
    }
    var info = mainRe.querySelector('.grade_slider_info');
    if (info) info.classList.remove('is-show');
  }

  // 상품 지원 가능성
  var possi = stepBox3.querySelector('.credit_rating_possi');
  if (possi) {
    possi.style.display = 'none';
    possi.style.opacity = '0';
    possi.style.transform = 'translateY(0.52vw)';
    possi.style.pointerEvents = 'none';
    possi.style.transition =
      'opacity 0.8s cubic-bezier(0.22,1,0.36,1), transform 0.8s cubic-bezier(0.22,1,0.36,1)';

    var bars = possi.querySelectorAll('.gp_bar');
    var spans = possi.querySelectorAll('.per span');
    bars.forEach(function (b) { b.style.width = '0%'; });
    spans.forEach(function (s) { s.textContent = '0'; });
  }

  // re_confirm
  var reConfirm = stepBox3.querySelector('.re_confirm');
  if (reConfirm) {
    reConfirm.style.display = 'none';
    reConfirm.style.opacity = '0';
    reConfirm.style.transform = 'translateY(0.52vw)';
    reConfirm.style.pointerEvents = 'none';
    reConfirm.style.transition =
      'opacity 0.8s cubic-bezier(0.22,1,0.36,1), transform 0.8s cubic-bezier(0.22,1,0.36,1)';
  }
}

/* 1단계: s1의 5개 슬라이더 애니메이션 */
function animateStep03SmallSliders(s1, onComplete) {
  var miniSlider = null;
  s1.querySelectorAll('.grade_slider').forEach(function (el) {
    if (el.parentElement === s1) miniSlider = el;
  });
  if (!miniSlider) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var lis = miniSlider.querySelectorAll('ul > li');
  if (!lis.length) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var targets = [80, 85, 75, 85, 80];
  var duration = 1000; // 1초
  var gap = 100;       // 0.1초
  var doneCount = 0;

  lis.forEach(function (li, idx) {
    var track = li.querySelector('.grade_track');
    if (!track) {
      doneCount++;
      return;
    }
    var fill = track.querySelector('.grade_fill');
    var thumb = track.querySelector('.grade_thumb');
    if (fill) fill.style.width = '0%';
    if (thumb) thumb.style.left = '0%';

    var target = targets[idx] != null ? targets[idx] : targets[targets.length - 1];

    setTimeout(function () {
      animateValueStep03(0, target, duration, function (v) {
        var val = Math.round(v * 10) / 10;
        if (fill) fill.style.width = val + '%';
        if (thumb) thumb.style.left = val + '%';
      }, function () {
        doneCount++;
        if (doneCount === lis.length && typeof onComplete === 'function') {
          onComplete();
        }
      });
    }, idx * gap);
  });
}

/* 2단계: prog_ico / desc.s1_1 / s1의 grade_slider 위로 사라짐 */
function hideStep03FirstGroup(stepBox3, onComplete) {
  var s1 = stepBox3.querySelector('.s1');
  if (!s1) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var prog = s1.querySelector('.prog_ico');
  var desc = s1.querySelector('.desc.s1_1');

  var miniSlider = null;
  s1.querySelectorAll('.grade_slider').forEach(function (el) {
    if (el.parentElement === s1) miniSlider = el;
  });

  var targets = [prog, desc, miniSlider].filter(Boolean);
  if (!targets.length) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var finished = 0;
  function oneDone() {
    finished++;
    if (finished === targets.length && typeof onComplete === 'function') {
      onComplete();
    }
  }

  targets.forEach(function (el) {
    el.style.transition =
      'opacity 0.8s cubic-bezier(0.22,1,0.36,1), transform 0.8s cubic-bezier(0.22,1,0.36,1)';

    onTransitionEndOnceStep03(el, function () {
      el.style.display = 'none';
      oneDone();
    }, 1000);

    requestAnimationFrame(function () {
      el.style.opacity = '0';
      el.style.transform = 'translateY(-0.52vw)';
      el.style.pointerEvents = 'none';
    });
  });
}

/* 3단계: credit_rating_re 등장 + 1초 동안 75%까지 채우고 info 등장 */
function showStep03MainSlider(stepBox3, onComplete) {
  var mainRe = stepBox3.querySelector('.credit_rating_re');
  if (!mainRe) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  mainRe.style.display = 'block';
  mainRe.style.opacity = '0';
  mainRe.style.transform = 'translateY(0.52vw)';
  mainRe.style.pointerEvents = 'none';
  mainRe.style.transition =
    'opacity 0.8s cubic-bezier(0.22,1,0.36,1), transform 0.8s cubic-bezier(0.22,1,0.36,1)';

  requestAnimationFrame(function () {
    mainRe.style.opacity = '1';
    mainRe.style.transform = 'translateY(0)';
    mainRe.style.pointerEvents = 'auto';
  });

  onTransitionEndOnceStep03(mainRe, function () {
    var track = mainRe.querySelector('.grade_track');
    if (!track) {
      if (typeof onComplete === 'function') onComplete();
      return;
    }
    var fill = track.querySelector('.grade_fill');
    var thumb = track.querySelector('.grade_thumb');
    if (fill) fill.style.width = '0%';
    if (thumb) thumb.style.left = '0%';

    var duration = 1000;
    var target = 75;

    animateValueStep03(0, target, duration, function (v) {
      var val = Math.round(v * 10) / 10;
      if (fill) fill.style.width = val + '%';
      if (thumb) thumb.style.left = val + '%';
    }, function () {
      var info = mainRe.querySelector('.grade_slider_info');
      if (info) info.classList.add('is-show');
      if (typeof onComplete === 'function') onComplete();
    });
  }, 1000);
}

/* 4단계: credit_rating_possi 등장 → 내부 바 85%, 90% 채운 뒤 콜백 */
function showStep03Posi(stepBox3, onComplete) {
  var possi = stepBox3.querySelector('.credit_rating_possi');
  if (!possi) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  possi.style.display = 'block';
  possi.style.opacity = '0';
  possi.style.transform = 'translateY(0.52vw)';
  possi.style.pointerEvents = 'none';
  possi.style.transition =
    'opacity 0.8s cubic-bezier(0.22,1,0.36,1), transform 0.8s cubic-bezier(0.22,1,0.36,1)';

  requestAnimationFrame(function () {
    possi.style.opacity = '1';
    possi.style.transform = 'translateY(0)';
  });

  onTransitionEndOnceStep03(possi, function () {
    animateStep03PosiBars(possi, function () {
      if (typeof onComplete === 'function') onComplete();
    });
  }, 1000);
}

/* possi_list 내 바: 금융/비금융 85%, 90% (1초) */
function animateStep03PosiBars(possi, onComplete) {
  var bars = possi.querySelectorAll('.gp_bar');
  var spans = possi.querySelectorAll('.per span');
  if (!bars.length) {
    if (typeof onComplete === 'function') onComplete();
    return;
  }

  var targets = [85, 90];
  var duration = 1000;
  var done = 0;

  bars.forEach(function (bar, idx) {
    var target = targets[idx] != null ? targets[idx] : targets[targets.length - 1];
    bar.style.width = '0%';

    animateValueStep03(0, target, duration, function (v) {
      var val = Math.round(v * 10) / 10;
      bar.style.width = val + '%';
    }, function () {
      done++;
      if (done === bars.length && typeof onComplete === 'function') {
        onComplete();
      }
    });
  });

  spans.forEach(function (span, idx) {
    var target = targets[idx] != null ? targets[idx] : targets[targets.length - 1];
    animateValueStep03(0, target, duration, function (v) {
      span.textContent = Math.round(v);
    });
  });
}

/* 5단계: re_confirm opacity 1 위로 스르륵 등장 */
function showStep03Confirm(stepBox3) {
  var reConfirm = stepBox3.querySelector('.re_confirm');
  if (!reConfirm) return;

  reConfirm.style.display = 'block';
  reConfirm.style.opacity = '0';
  reConfirm.style.transform = 'translateY(0.52vw)';
  reConfirm.style.pointerEvents = 'none';
  reConfirm.style.transition =
    'opacity 0.8s cubic-bezier(0.22,1,0.36,1), transform 0.8s cubic-bezier(0.22,1,0.36,1)';

  requestAnimationFrame(function () {
    reConfirm.style.opacity = '1';
    reConfirm.style.transform = 'translateY(0)';
    reConfirm.style.pointerEvents = 'auto';
  });
}


/* Gate 01 Card Detail */
document.addEventListener('DOMContentLoaded', function () {
  var cards = document.querySelectorAll('.card_detail');
  if (!cards.length) return;

  // 1) 혹시 마크업에 is-show가 박혀 있다면 일단 다 제거
  cards.forEach(function (card) {
    card.classList.remove('is-show');
  });

  // 2) 애니 관찰자 세팅
  cards.forEach(function (card) {
    initCardDetailAnimation(card);
  });

  // 3) 기본으로 보여줄 카드 선택
  //    - #cardDetail01 우선, 없으면 첫 번째 .card_detail
  var defaultCard = document.getElementById('cardDetail01') || cards[0];

  // 4) observer 세팅이 끝난 뒤 is-show를 붙여서
  //    → runCardDetailSequence 가 정상적으로 한 번 돌도록
  if (defaultCard) {
    defaultCard.classList.add('is-show');
  }
});
</script>